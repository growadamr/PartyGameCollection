extends Node

## Web player files embedded as string constants
## This ensures they're always included in exports regardless of import settings

const WEB_FILES = {
	"/": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\">\n    <meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\n    <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\">\n    <title>Party Games</title>\n    <link rel=\"stylesheet\" href=\"css/style.css\">\n</head>\n<body>\n    <div id=\"app\">\n        <!-- Connection Screen -->\n        <div id=\"screen-connect\" class=\"screen active\">\n            <h1>Party Games</h1>\n            <div class=\"card\">\n                <p class=\"status\" id=\"connection-status\">Connecting to host...</p>\n                <div id=\"manual-connect\" class=\"hidden\">\n                    <input type=\"text\" id=\"host-ip\" placeholder=\"Host IP (e.g., 192.168.1.5)\">\n                    <input type=\"number\" id=\"host-port\" placeholder=\"Port\" value=\"8080\">\n                    <button id=\"btn-connect\" class=\"btn-primary\">Connect</button>\n                </div>\n            </div>\n        </div>\n\n        <!-- Join Screen -->\n        <div id=\"screen-join\" class=\"screen\">\n            <h1>Join Game</h1>\n            <div class=\"card\">\n                <input type=\"text\" id=\"player-name\" placeholder=\"Your Name\" maxlength=\"12\">\n                <div id=\"character-grid\" class=\"character-grid\">\n                    <!-- Characters populated by JS -->\n                </div>\n                <button id=\"btn-join\" class=\"btn-primary\" disabled>Join</button>\n            </div>\n        </div>\n\n        <!-- Waiting Screen -->\n        <div id=\"screen-waiting\" class=\"screen\">\n            <h1>Waiting for Host</h1>\n            <div class=\"card\">\n                <p class=\"player-name\" id=\"display-name\"></p>\n                <div class=\"character-preview\" id=\"display-character\"></div>\n                <p class=\"status\">Waiting for the game to start...</p>\n                <div id=\"players-list\" class=\"players-list\"></div>\n            </div>\n        </div>\n\n        <!-- Game: Charades -->\n        <div id=\"screen-charades\" class=\"screen\">\n            <div class=\"game-header\">\n                <span class=\"game-title\">Charades</span>\n                <span class=\"timer\" id=\"charades-timer\">60</span>\n            </div>\n\n            <div id=\"charades-actor-view\" class=\"game-content hidden\">\n                <p class=\"role-label\">You're Acting!</p>\n                <div class=\"prompt-card\" id=\"charades-prompt\">???</div>\n                <button id=\"btn-start-turn\" class=\"btn-primary\">Start My Turn</button>\n                <button id=\"btn-skip\" class=\"btn-secondary hidden\">Skip</button>\n            </div>\n\n            <div id=\"charades-guesser-view\" class=\"game-content hidden\">\n                <p class=\"role-label\">Guess what <span id=\"charades-actor-name\">???</span> is acting!</p>\n                <div class=\"prompt-card\">???</div>\n                <input type=\"text\" id=\"charades-guess\" placeholder=\"Type your guess...\">\n                <button id=\"btn-guess\" class=\"btn-primary\">Guess</button>\n            </div>\n\n            <div id=\"charades-result-view\" class=\"game-content hidden\">\n                <div class=\"result-card\" id=\"charades-result\"></div>\n            </div>\n        </div>\n\n        <!-- Game: Word Bomb -->\n        <div id=\"screen-word-bomb\" class=\"screen\">\n            <div class=\"game-header\">\n                <span class=\"game-title\">Word Bomb</span>\n                <span class=\"timer\" id=\"wordbomb-timer\">10</span>\n            </div>\n\n            <div class=\"game-content\">\n                <div class=\"lives\" id=\"wordbomb-lives\"></div>\n                <div class=\"prompt-card large\" id=\"wordbomb-letters\">PH</div>\n                <input type=\"text\" id=\"wordbomb-input\" placeholder=\"Type a word...\" autocomplete=\"off\">\n                <button id=\"btn-submit-word\" class=\"btn-primary\">Submit</button>\n                <p class=\"feedback\" id=\"wordbomb-feedback\"></p>\n            </div>\n        </div>\n\n        <!-- Game: Quick Draw -->\n        <div id=\"screen-quick-draw\" class=\"screen\">\n            <div class=\"game-header\">\n                <span class=\"game-title\">Quick Draw</span>\n                <span class=\"timer\" id=\"quickdraw-timer\">60</span>\n            </div>\n\n            <div id=\"quickdraw-drawer-view\" class=\"game-content hidden\">\n                <p class=\"role-label\">Draw this:</p>\n                <div class=\"prompt-card\" id=\"quickdraw-prompt\">???</div>\n                <canvas id=\"drawing-canvas\" width=\"300\" height=\"300\"></canvas>\n                <div class=\"drawing-tools\">\n                    <button id=\"btn-eraser\" class=\"btn-secondary\">Eraser</button>\n                    <button id=\"btn-clear\" class=\"btn-secondary\">Clear</button>\n                    <input type=\"color\" id=\"brush-color\" value=\"#ffffff\">\n                </div>\n            </div>\n\n            <div id=\"quickdraw-guesser-view\" class=\"game-content hidden\">\n                <p class=\"role-label\">Guess what <span id=\"quickdraw-drawer-name\">???</span> is drawing!</p>\n                <div class=\"drawing-display\" id=\"quickdraw-canvas-display\"></div>\n                <p id=\"quickdraw-wrong-guess\" class=\"wrong-guess\"></p>\n                <input type=\"text\" id=\"quickdraw-guess\" placeholder=\"Type your guess...\">\n                <button id=\"btn-quickdraw-guess\" class=\"btn-primary\">Guess</button>\n            </div>\n        </div>\n\n        <!-- Game: Imposter -->\n        <div id=\"screen-imposter\" class=\"screen\">\n            <div class=\"game-header\">\n                <span class=\"game-title\">Imposter</span>\n                <span class=\"imposter-count\" id=\"imposter-count-display\">? imposters</span>\n            </div>\n\n            <!-- Role/Discussion View (existing, now wrapped) -->\n            <div id=\"imposter-role-view\" class=\"game-content\">\n                <p class=\"role-label\" id=\"imposter-role-label\">Your Role</p>\n                <div class=\"prompt-card large\" id=\"imposter-word\">???</div>\n                <p class=\"info-text\" id=\"imposter-info\">? imposters among you</p>\n                <p class=\"instruction\" id=\"imposter-instruction\">Waiting for game to start...</p>\n            </div>\n\n            <!-- Voting View -->\n            <div id=\"imposter-voting-view\" class=\"game-content hidden\">\n                <p class=\"vote-instruction\">Tap a player to vote</p>\n                <div id=\"vote-player-list\" class=\"vote-list\">\n                    <!-- Dynamically populated with vote-option divs -->\n                </div>\n            </div>\n\n            <!-- Spectator View (eliminated players) -->\n            <div id=\"imposter-spectator-view\" class=\"game-content hidden\">\n                <p class=\"spectator-label\">You've been eliminated</p>\n                <p class=\"spectator-word\" id=\"spectator-word-display\"></p>\n                <p class=\"spectator-instruction\">Watch the votes unfold...</p>\n                <div id=\"spectator-vote-list\" class=\"vote-list spectator\">\n                    <!-- Dynamically populated, non-interactive -->\n                </div>\n            </div>\n\n            <!-- Consensus Warning View -->\n            <div id=\"imposter-consensus-view\" class=\"game-content hidden\">\n                <div class=\"consensus-warning\">\n                    <p class=\"consensus-text\">Consensus on</p>\n                    <p class=\"consensus-name\" id=\"consensus-target-name\">???</p>\n                    <div class=\"countdown-number\" id=\"consensus-countdown\">5</div>\n                    <p class=\"consensus-subtext\">Vote changes can stop this!</p>\n                </div>\n            </div>\n\n            <!-- Revealing View -->\n            <div id=\"imposter-reveal-view\" class=\"game-content hidden\">\n                <div class=\"reveal-card\">\n                    <p class=\"reveal-text\">Revealing...</p>\n                    <p class=\"reveal-name\" id=\"reveal-target-name\">???</p>\n                </div>\n            </div>\n\n            <!-- Result View -->\n            <div id=\"imposter-result-view\" class=\"game-content hidden\">\n                <div class=\"result-card\" id=\"result-card\">\n                    <h2 class=\"result-name\" id=\"result-player-name\">Alex</h2>\n                    <p class=\"result-role\" id=\"result-role-text\">was an IMPOSTER!</p>\n                    <p class=\"result-remaining\" id=\"result-remaining\">1 imposter remaining</p>\n                </div>\n            </div>\n\n            <!-- Guess input (imposters only, toggled by JS independently of views) -->\n            <div id=\"imposter-guess-section\" class=\"guess-section hidden\">\n                <p class=\"guess-label\">Guess the word:</p>\n                <div class=\"guess-input-row\">\n                    <input type=\"text\" id=\"imposter-guess-input\" class=\"guess-input\" placeholder=\"Enter your guess...\" autocomplete=\"off\" />\n                    <button id=\"imposter-guess-btn\" class=\"btn-guess\">Guess</button>\n                </div>\n                <p id=\"guess-feedback\" class=\"guess-feedback hidden\"></p>\n            </div>\n\n            <!-- Round End View -->\n            <div id=\"imposter-round-end-view\" class=\"game-content hidden\">\n                <div id=\"round-end-card\" class=\"round-end-card\">\n                    <h2 id=\"round-end-winner\" class=\"round-end-winner\">IMPOSTERS WIN!</h2>\n                    <p id=\"round-end-word\" class=\"round-end-word\">The word was: ???</p>\n                    <div id=\"round-end-imposters\" class=\"round-end-imposters\">\n                        <p class=\"imposters-label\">The imposters were:</p>\n                        <p id=\"round-end-imposter-names\" class=\"imposter-names\">???</p>\n                    </div>\n                    <div class=\"round-end-scores\">\n                        <span id=\"round-end-imposter-score\" class=\"team-score imposter-score\">Imposters: 0</span>\n                        <span class=\"score-divider\">|</span>\n                        <span id=\"round-end-innocent-score\" class=\"team-score innocent-score\">Innocents: 0</span>\n                    </div>\n                </div>\n        <!-- Game: Who Said It -->\n        <div id=\"screen-who-said-it\" class=\"screen\">\n            <div class=\"game-header\">\n                <span class=\"game-title\">Who Said It?</span>\n                <span class=\"timer\" id=\"whosaid-timer\">60</span>\n            </div>\n\n            <div id=\"whosaid-writing-view\" class=\"game-content hidden\">\n                <div class=\"prompt-card\" id=\"whosaid-prompt\">???</div>\n                <p class=\"role-label\">Type your answer (keep it secret!):</p>\n                <textarea id=\"whosaid-answer\" placeholder=\"Your answer...\" rows=\"3\"></textarea>\n                <button id=\"btn-submit-answer\" class=\"btn-primary\">Submit Answer</button>\n                <p class=\"status\" id=\"whosaid-answers-status\">0 answers received</p>\n            </div>\n\n            <div id=\"whosaid-voting-view\" class=\"game-content hidden\">\n                <p class=\"role-label\">Who wrote this?</p>\n                <div class=\"prompt-card\" id=\"whosaid-answer-display\">\"...\"</div>\n                <div class=\"vote-buttons\" id=\"whosaid-vote-buttons\"></div>\n                <p class=\"status\" id=\"whosaid-votes-status\">0 votes</p>\n            </div>\n\n            <div id=\"whosaid-author-view\" class=\"game-content hidden\">\n                <p class=\"role-label\">This is YOUR answer!</p>\n                <div class=\"prompt-card\" id=\"whosaid-your-answer\">\"...\"</div>\n                <p class=\"status\">Wait and see who guesses correctly...</p>\n            </div>\n\n            <div id=\"whosaid-reveal-view\" class=\"game-content hidden\">\n                <div class=\"prompt-card\" id=\"whosaid-reveal-answer\">\"...\"</div>\n                <p class=\"reveal-author\" id=\"whosaid-reveal-author\">Written by: ???</p>\n                <div class=\"reveal-results\" id=\"whosaid-reveal-results\"></div>\n            </div>\n\n            <div id=\"whosaid-ready-view\" class=\"game-content hidden\">\n                <h2 id=\"whosaid-ready-title\">Ready to Start?</h2>\n                <div class=\"players-ready-grid\" id=\"whosaid-players-ready\"></div>\n                <button id=\"btn-ready\" class=\"btn-primary btn-large\">Ready!</button>\n                <p class=\"status\" id=\"whosaid-ready-status\">0/4 ready</p>\n            </div>\n\n            <div id=\"whosaid-round-end-view\" class=\"game-content hidden\">\n                <h2 id=\"whosaid-round-complete\">Round Complete!</h2>\n                <p class=\"status\">Next round starting soon...</p>\n            </div>\n        </div>\n\n<!-- Game: Fibbage -->\n        <div id=\"screen-fibbage\" class=\"screen\">\n            <div class=\"game-header\">\n                <span class=\"game-title\">Fibbage</span>\n                <span class=\"timer\" id=\"fibbage-timer\">60</span>\n            </div>\n\n            <div id=\"fibbage-writing-view\" class=\"game-content hidden\">\n                <div class=\"prompt-card\" id=\"fibbage-question\">???</div>\n                <p class=\"role-label\">Write a believable LIE to fill in the blank:</p>\n                <textarea id=\"fibbage-answer\" placeholder=\"Your lie...\" rows=\"2\"></textarea>\n                <button id=\"btn-submit-lie\" class=\"btn-primary\">Submit Lie</button>\n                <p class=\"status\" id=\"fibbage-answers-status\">0 lies submitted</p>\n            </div>\n\n            <div id=\"fibbage-voting-view\" class=\"game-content hidden\">\n                <div class=\"prompt-card\" id=\"fibbage-vote-question\">???</div>\n                <p class=\"role-label\">Which answer is the TRUTH?</p>\n                <div class=\"vote-buttons-vertical\" id=\"fibbage-vote-buttons\"></div>\n                <p class=\"status\" id=\"fibbage-votes-status\">0 votes</p>\n            </div>\n\n            <div id=\"fibbage-reveal-view\" class=\"game-content hidden\">\n                <div class=\"prompt-card reveal-truth\" id=\"fibbage-reveal-answer\">The truth: \"...\"</div>\n                <div class=\"reveal-results\" id=\"fibbage-reveal-results\"></div>\n            </div>\n\n            <div id=\"fibbage-ready-view\" class=\"game-content hidden\">\n                <h2 id=\"fibbage-ready-title\">Ready to Lie?</h2>\n                <div class=\"players-ready-grid\" id=\"fibbage-players-ready\"></div>\n                <button id=\"btn-fibbage-ready\" class=\"btn-primary btn-large\">Ready!</button>\n                <p class=\"status\" id=\"fibbage-ready-status\">0/4 ready</p>\n            </div>\n\n            <div id=\"fibbage-round-end-view\" class=\"game-content hidden\">\n                <h2 id=\"fibbage-round-complete\">Round Complete!</h2>\n                <p class=\"status\">Next round starting soon...</p>\n            </div>\n        </div>\n\n        <!-- Game: Trivia Showdown -->\n        <div id=\"screen-trivia\" class=\"screen\">\n            <div class=\"game-header\">\n                <span class=\"game-title\">Trivia Showdown</span>\n                <span class=\"timer\" id=\"trivia-timer\">15</span>\n            </div>\n\n            <div id=\"trivia-ready-view\" class=\"game-content hidden\">\n                <h2 id=\"trivia-ready-title\">Ready to Start?</h2>\n                <div class=\"players-ready-grid\" id=\"trivia-players-ready\"></div>\n                <button id=\"btn-trivia-ready\" class=\"btn-primary btn-large\">Ready!</button>\n                <p class=\"status\" id=\"trivia-ready-status\">0/4 ready</p>\n            </div>\n\n            <div id=\"trivia-question-view\" class=\"game-content hidden\">\n                <div class=\"trivia-question-header\">\n                    <span class=\"category\" id=\"trivia-category\">Science</span>\n                    <span class=\"question-num\" id=\"trivia-question-num\">Question 1/10</span>\n                </div>\n                <div class=\"prompt-card\" id=\"trivia-question-text\">???</div>\n                <div class=\"trivia-answers\" id=\"trivia-answer-buttons\"></div>\n                <p class=\"status\" id=\"trivia-answer-status\">0 answered</p>\n            </div>\n\n            <div id=\"trivia-result-view\" class=\"game-content hidden\">\n                <h2 id=\"trivia-result-label\" class=\"result-correct\">Correct!</h2>\n                <p class=\"points-earned\" id=\"trivia-points-label\">+150 points</p>\n                <p class=\"correct-answer\" id=\"trivia-correct-answer\">Answer: Au</p>\n            </div>\n\n            <div id=\"trivia-leaderboard-view\" class=\"game-content hidden\">\n                <h2 id=\"trivia-leaderboard-title\">Leaderboard</h2>\n                <div class=\"leaderboard-list\" id=\"trivia-leaderboard-list\"></div>\n            </div>\n\n            <div id=\"trivia-round-end-view\" class=\"game-content hidden\">\n                <h2 id=\"trivia-round-complete\">Round Complete!</h2>\n                <p class=\"round-winner\" id=\"trivia-round-winner\">Winner: ???</p>\n                <p class=\"status\">Next round starting soon...</p>\n            </div>\n        </div>\n\n        <!-- Game Over Screen -->\n        <div id=\"screen-game-over\" class=\"screen\">\n            <h1>Game Over!</h1>\n            <div class=\"card\">\n                <div class=\"winner\" id=\"winner-display\"></div>\n                <div class=\"final-scores\" id=\"final-scores\"></div>\n                <p class=\"status\">Returning to lobby...</p>\n            </div>\n        </div>\n\n        <!-- Disconnected Screen -->\n        <div id=\"screen-disconnected\" class=\"screen\">\n            <h1>Disconnected</h1>\n            <div class=\"card\">\n                <p class=\"status\">Lost connection to host</p>\n                <button id=\"btn-reconnect\" class=\"btn-primary\">Try Again</button>\n            </div>\n        </div>\n    </div>\n\n    <script src=\"js/websocket.js\"></script>\n    <script src=\"js/games/charades.js\"></script>\n    <script src=\"js/games/wordbomb.js\"></script>\n    <script src=\"js/games/quickdraw.js\"></script>\n    <script src=\"js/games/imposter.js\"></script>\n    <script src=\"js/games/whosaidit.js\"></script>\n    <script src=\"js/games/fibbage.js\"></script>\n    <script src=\"js/games/trivia.js\"></script>\n    <script src=\"js/app.js\"></script>\n</body>\n</html>\n",
	"/css/style.css": "/* Reset and Base Styles */\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\n:root {\n    --bg-primary: #1a1a2e;\n    --bg-secondary: #16213e;\n    --bg-card: #252540;\n    --text-primary: #ffffff;\n    --text-secondary: #a0a0a0;\n    --accent-primary: #6c63ff;\n    --accent-secondary: #ff6b6b;\n    --accent-success: #4ade80;\n    --accent-warning: #fbbf24;\n    --border-radius: 12px;\n}\n\nhtml, body {\n    height: 100%;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    background: var(--bg-primary);\n    color: var(--text-primary);\n    overflow: hidden;\n}\n\n#app {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n}\n\n/* Screen Management */\n.screen {\n    display: none;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-start;\n    padding: 20px;\n    height: 100%;\n    overflow-y: auto;\n}\n\n.screen.active {\n    display: flex;\n}\n\n/* Typography */\nh1 {\n    font-size: 2rem;\n    margin-bottom: 20px;\n    text-align: center;\n}\n\n.status {\n    color: var(--text-secondary);\n    text-align: center;\n    margin: 10px 0;\n}\n\n/* Cards */\n.card {\n    background: var(--bg-card);\n    border-radius: var(--border-radius);\n    padding: 24px;\n    width: 100%;\n    max-width: 400px;\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n}\n\n/* Buttons */\nbutton {\n    border: none;\n    border-radius: var(--border-radius);\n    padding: 16px 24px;\n    font-size: 1.1rem;\n    font-weight: 600;\n    cursor: pointer;\n    transition: transform 0.1s, opacity 0.1s;\n}\n\nbutton:active {\n    transform: scale(0.98);\n}\n\nbutton:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n}\n\n.btn-primary {\n    background: var(--accent-primary);\n    color: white;\n}\n\n.btn-secondary {\n    background: var(--bg-secondary);\n    color: var(--text-primary);\n    border: 2px solid var(--text-secondary);\n}\n\n/* Inputs */\ninput[type=\"text\"],\ninput[type=\"number\"] {\n    background: var(--bg-secondary);\n    border: 2px solid transparent;\n    border-radius: var(--border-radius);\n    padding: 16px;\n    font-size: 1.1rem;\n    color: var(--text-primary);\n    width: 100%;\n}\n\ninput[type=\"text\"]:focus,\ninput[type=\"number\"]:focus {\n    outline: none;\n    border-color: var(--accent-primary);\n}\n\ninput::placeholder {\n    color: var(--text-secondary);\n}\n\n/* Character Selection */\n.character-grid {\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    gap: 10px;\n    margin: 10px 0;\n}\n\n.character-option {\n    aspect-ratio: 1;\n    border-radius: 12px;\n    border: 3px solid transparent;\n    cursor: pointer;\n    transition: transform 0.1s, border-color 0.1s;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.character-option:hover {\n    transform: scale(1.05);\n}\n\n.character-option.selected {\n    border-color: var(--accent-primary);\n}\n\n.character-option.taken {\n    opacity: 0.3;\n    cursor: not-allowed;\n}\n\n.character-preview {\n    width: 80px;\n    height: 80px;\n    border-radius: 16px;\n    margin: 0 auto;\n}\n\n/* Players List */\n.players-list {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 10px;\n    justify-content: center;\n}\n\n.player-chip {\n    background: var(--bg-secondary);\n    padding: 8px 16px;\n    border-radius: 20px;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.player-chip .dot {\n    width: 12px;\n    height: 12px;\n    border-radius: 50%;\n}\n\n/* Game Header */\n.game-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    max-width: 400px;\n    padding: 10px 0;\n    margin-bottom: 20px;\n}\n\n.game-title {\n    font-size: 1.2rem;\n    font-weight: 600;\n}\n\n.timer {\n    font-size: 2rem;\n    font-weight: bold;\n    color: var(--accent-warning);\n    min-width: 60px;\n    text-align: center;\n}\n\n.timer.warning {\n    color: var(--accent-secondary);\n    animation: pulse 0.5s infinite;\n}\n\n@keyframes pulse {\n    0%, 100% { opacity: 1; }\n    50% { opacity: 0.5; }\n}\n\n/* Game Content */\n.game-content {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 16px;\n    width: 100%;\n    max-width: 400px;\n}\n\n.game-content.hidden {\n    display: none;\n}\n\n.role-label {\n    font-size: 1.2rem;\n    color: var(--text-secondary);\n    text-align: center;\n}\n\n.prompt-card {\n    background: var(--bg-card);\n    border-radius: var(--border-radius);\n    padding: 32px;\n    font-size: 2rem;\n    font-weight: bold;\n    text-align: center;\n    width: 100%;\n    color: var(--accent-success);\n}\n\n.prompt-card.large {\n    font-size: 3rem;\n    padding: 48px;\n}\n\n/* Lives Display */\n.lives {\n    display: flex;\n    gap: 8px;\n    font-size: 1.5rem;\n}\n\n.life {\n    opacity: 1;\n}\n\n.life.lost {\n    opacity: 0.2;\n}\n\n/* Feedback */\n.feedback {\n    text-align: center;\n    font-size: 1rem;\n    min-height: 24px;\n}\n\n.feedback.success {\n    color: var(--accent-success);\n}\n\n.feedback.error {\n    color: var(--accent-secondary);\n}\n\n/* Wrong Guess Display */\n.wrong-guess {\n    color: var(--accent-secondary);\n    font-size: 0.95rem;\n    text-align: center;\n    min-height: 20px;\n    opacity: 0.9;\n}\n\n/* Drawing Canvas */\n#drawing-canvas {\n    background: #1a1a1a;\n    border-radius: var(--border-radius);\n    touch-action: none;\n    cursor: crosshair;\n}\n\n.drawing-tools {\n    display: flex;\n    gap: 12px;\n    align-items: center;\n}\n\n.drawing-display {\n    width: 100%;\n    max-width: 300px;\n    aspect-ratio: 1;\n    background: #1a1a1a;\n    border-radius: var(--border-radius);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n/* Results */\n.result-card {\n    background: var(--bg-card);\n    border-radius: var(--border-radius);\n    padding: 24px;\n    text-align: center;\n    width: 100%;\n}\n\n.result-card h2 {\n    font-size: 1.5rem;\n    margin-bottom: 10px;\n}\n\n.result-card .answer {\n    font-size: 2rem;\n    color: var(--accent-success);\n    margin: 16px 0;\n}\n\n/* Winner Display */\n.winner {\n    text-align: center;\n    padding: 20px;\n}\n\n.winner h2 {\n    font-size: 1.5rem;\n    color: var(--accent-warning);\n}\n\n.winner .name {\n    font-size: 2rem;\n    font-weight: bold;\n}\n\n.final-scores {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.score-row {\n    display: flex;\n    justify-content: space-between;\n    padding: 8px 12px;\n    background: var(--bg-secondary);\n    border-radius: 8px;\n}\n\n/* Who Said It - Textarea */\ntextarea {\n    background: var(--bg-secondary);\n    border: 2px solid transparent;\n    border-radius: var(--border-radius);\n    padding: 16px;\n    font-size: 1.1rem;\n    color: var(--text-primary);\n    width: 100%;\n    resize: none;\n    font-family: inherit;\n}\n\ntextarea:focus {\n    outline: none;\n    border-color: var(--accent-primary);\n}\n\ntextarea::placeholder {\n    color: var(--text-secondary);\n}\n\n/* Who Said It - Vote Buttons */\n.vote-buttons {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 12px;\n    width: 100%;\n}\n\n.btn-vote {\n    background: var(--bg-card);\n    color: var(--text-primary);\n    border: 2px solid var(--accent-primary);\n    padding: 16px;\n    font-size: 1rem;\n    font-weight: 600;\n}\n\n.btn-vote:hover:not(:disabled) {\n    background: var(--accent-primary);\n}\n\n.btn-vote:disabled {\n    border-color: var(--text-secondary);\n    opacity: 0.5;\n}\n\n/* Who Said It - Reveal */\n.reveal-author {\n    font-size: 1.3rem;\n    color: var(--accent-success);\n    text-align: center;\n    margin: 12px 0;\n}\n\n.reveal-results {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    width: 100%;\n    margin-top: 16px;\n}\n\n.result-correct {\n    background: rgba(74, 222, 128, 0.15);\n    color: var(--accent-success);\n    padding: 12px 16px;\n    border-radius: 8px;\n    text-align: center;\n}\n\n.result-fooled {\n    background: rgba(251, 191, 36, 0.15);\n    color: var(--accent-warning);\n    padding: 12px 16px;\n    border-radius: 8px;\n    text-align: center;\n}\n\n/* Who Said It - Ready View */\n.btn-large {\n    padding: 20px 40px;\n    font-size: 1.3rem;\n}\n\n.players-ready-grid {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    gap: 16px;\n    margin: 20px 0;\n    width: 100%;\n}\n\n.player-ready-indicator {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 6px;\n    opacity: 0.5;\n    transition: opacity 0.2s;\n}\n\n.player-ready-indicator.ready {\n    opacity: 1;\n}\n\n.player-avatar {\n    width: 50px;\n    height: 50px;\n    border-radius: 10px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: relative;\n    border: 3px solid transparent;\n    transition: border-color 0.2s;\n}\n\n.player-ready-indicator.ready .player-avatar {\n    border-color: var(--accent-success);\n}\n\n.player-avatar .checkmark {\n    font-size: 1.5rem;\n    color: white;\n    text-shadow: 0 0 4px rgba(0,0,0,0.5);\n}\n\n.player-ready-indicator .player-name {\n    font-size: 0.85rem;\n    color: var(--text-secondary);\n}\n\n.player-ready-indicator.ready .player-name {\n    color: var(--text-primary);\n}\n\n/* Fibbage - Vote Buttons (Vertical) */\n.vote-buttons-vertical {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    width: 100%;\n}\n\n.btn-vote-answer {\n    background: var(--bg-card);\n    color: var(--text-primary);\n    border: 2px solid var(--accent-primary);\n    padding: 14px 20px;\n    font-size: 1rem;\n    font-weight: 500;\n    text-align: left;\n    width: 100%;\n}\n\n.btn-vote-answer:hover:not(:disabled) {\n    background: var(--accent-primary);\n}\n\n.btn-vote-answer:disabled {\n    border-color: var(--text-secondary);\n    opacity: 0.5;\n}\n\n/* Fibbage - Reveal Truth */\n.reveal-truth {\n    border-color: var(--accent-success);\n    color: var(--accent-success);\n}\n\n.result-wrong {\n    background: rgba(248, 113, 113, 0.15);\n    color: var(--accent-error);\n    padding: 12px 16px;\n    border-radius: 8px;\n    text-align: center;\n}\n\n/* Trivia Showdown Styles */\n.trivia-question-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    margin-bottom: 8px;\n}\n\n.trivia-question-header .category {\n    background: var(--accent-primary);\n    color: white;\n    padding: 6px 14px;\n    border-radius: 20px;\n    font-size: 0.9rem;\n    font-weight: 600;\n}\n\n.trivia-question-header .question-num {\n    color: var(--text-secondary);\n    font-size: 0.9rem;\n}\n\n.trivia-answers {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    width: 100%;\n}\n.btn-trivia-answer {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    background: var(--bg-card);\n    color: var(--text-primary);\n    border: 2px solid var(--bg-secondary);\n    padding: 14px 18px;\n    font-size: 1rem;\n    text-align: left;\n    transition: border-color 0.2s, background 0.2s;\n}\n\n.btn-trivia-answer:hover:not(:disabled) {\n    border-color: var(--accent-primary);\n    background: var(--bg-secondary);\n}\n\n.btn-trivia-answer:disabled {\n    opacity: 0.7;\n}\n\n.btn-trivia-answer.selected {\n    border-color: var(--accent-primary);\n    background: rgba(108, 99, 255, 0.2);\n}\n\n.btn-trivia-answer.correct {\n    border-color: var(--accent-success);\n    background: rgba(74, 222, 128, 0.2);\n}\n\n.btn-trivia-answer.wrong {\n    border-color: var(--accent-secondary);\n    background: rgba(255, 107, 107, 0.2);\n}\n\n.btn-trivia-answer .answer-label {\n    background: var(--bg-secondary);\n    width: 32px;\n    height: 32px;\n    border-radius: 8px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-weight: bold;\n    flex-shrink: 0;\n}\n\n.btn-trivia-answer .answer-text {\n    flex: 1;\n}\n\n/* Trivia Result Styles */\n#trivia-result-view h2 {\n    font-size: 2.5rem;\n    margin-bottom: 8px;\n}\n\n#trivia-result-view .result-correct {\n    color: var(--accent-success);\n    background: transparent;\n    padding: 0;\n}\n\n#trivia-result-view .result-wrong {\n    color: var(--accent-secondary);\n}\n\n#trivia-result-view .result-timeout {\n    color: var(--accent-warning);\n}\n\n.points-earned {\n    font-size: 1.8rem;\n    font-weight: bold;\n    color: var(--accent-warning);\n}\n\n.correct-answer {\n    font-size: 1.1rem;\n    color: var(--text-secondary);\n    margin-top: 8px;\n}\n\n/* Trivia Leaderboard Styles */\n.leaderboard-list {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    width: 100%;\n    margin-top: 16px;\n}\n\n.leaderboard-row {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    padding: 12px 16px;\n    background: var(--bg-card);\n    border-radius: var(--border-radius);\n}\n\n.leaderboard-row .rank {\n    font-weight: bold;\n    font-size: 1.1rem;\n    width: 40px;\n}\n\n.leaderboard-row .rank.rank-gold {\n    color: #ffd700;\n}\n\n.leaderboard-row .rank.rank-silver {\n    color: #c0c0c0;\n}\n\n.leaderboard-row .rank.rank-bronze {\n    color: #cd7f32;\n}\n\n.leaderboard-row .name {\n    flex: 1;\n    font-size: 1.1rem;\n}\n\n.leaderboard-row .score {\n    font-weight: bold;\n    font-size: 1.1rem;\n    color: var(--accent-warning);\n}\n\n/* Trivia Round End Styles */\n.round-winner {\n    font-size: 1.3rem;\n    color: var(--accent-warning);\n    margin: 12px 0;\n}\n\n/* Utility */\n.hidden {\n    display: none !important;\n}\n\n/* ============ IMPOSTER VOTING STYLES ============ */\n\n/* Imposter count in header */\n.imposter-count {\n    color: var(--accent-secondary);\n    font-size: 0.9rem;\n}\n\n/* Vote instruction */\n.vote-instruction {\n    color: var(--text-secondary);\n    text-align: center;\n    margin-bottom: 8px;\n}\n\n/* Voting list container */\n.vote-list {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n    width: 100%;\n}\n\n/* Individual vote option */\n.vote-option {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 16px;\n    background: var(--bg-card);\n    border-radius: var(--border-radius);\n    border: 3px solid transparent;\n    cursor: pointer;\n    transition: border-color 0.2s, opacity 0.2s;\n}\n\n.vote-option:active {\n    transform: scale(0.98);\n}\n\n.vote-option.my-vote {\n    border-color: var(--accent-primary);\n}\n\n.vote-option.eliminated {\n    opacity: 0.4;\n    text-decoration: line-through;\n    cursor: not-allowed;\n    pointer-events: none;\n}\n\n.vote-option .player-name {\n    font-size: 1.1rem;\n    font-weight: 500;\n}\n\n.vote-option .vote-count {\n    background: var(--accent-secondary);\n    color: white;\n    padding: 4px 12px;\n    border-radius: 12px;\n    font-weight: bold;\n    font-size: 0.9rem;\n    min-width: 24px;\n    text-align: center;\n}\n\n.vote-option .vote-count.zero {\n    background: var(--bg-secondary);\n    color: var(--text-secondary);\n}\n\n/* Spectator styles */\n.spectator-label {\n    color: var(--text-secondary);\n    font-size: 1.2rem;\n    text-align: center;\n}\n\n.spectator-word {\n    font-size: 1.5rem;\n    color: var(--accent-success);\n    text-align: center;\n    margin: 8px 0;\n}\n\n.spectator-instruction {\n    color: var(--text-secondary);\n    font-size: 0.9rem;\n    text-align: center;\n    margin-bottom: 16px;\n}\n\n.vote-list.spectator .vote-option {\n    cursor: default;\n    pointer-events: none;\n}\n\n/* Consensus warning */\n.consensus-warning {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    text-align: center;\n    padding: 32px;\n    border-radius: var(--border-radius);\n    animation: pulse-red 0.5s infinite;\n    width: 100%;\n}\n\n@keyframes pulse-red {\n    0%, 100% { background-color: rgba(255, 59, 59, 0.15); }\n    50% { background-color: rgba(255, 59, 59, 0.35); }\n}\n\n.consensus-text {\n    font-size: 1.2rem;\n    color: var(--text-secondary);\n    margin-bottom: 4px;\n}\n\n.consensus-name {\n    font-size: 2rem;\n    font-weight: bold;\n    color: var(--accent-secondary);\n    margin-bottom: 16px;\n}\n\n.countdown-number {\n    font-size: 6rem;\n    font-weight: bold;\n    color: var(--accent-secondary);\n    line-height: 1;\n}\n\n.consensus-subtext {\n    font-size: 0.9rem;\n    color: var(--text-secondary);\n    margin-top: 16px;\n}\n\n/* Reveal view */\n.reveal-card {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 48px 32px;\n    background: var(--bg-card);\n    border-radius: var(--border-radius);\n    width: 100%;\n    animation: reveal-pulse 1s infinite;\n}\n\n@keyframes reveal-pulse {\n    0%, 100% { opacity: 1; }\n    50% { opacity: 0.7; }\n}\n\n.reveal-text {\n    font-size: 1.5rem;\n    color: var(--text-secondary);\n    margin-bottom: 8px;\n}\n\n.reveal-name {\n    font-size: 2.5rem;\n    font-weight: bold;\n    color: var(--text-primary);\n}\n\n/* Result view */\n#imposter-result-view .result-card {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 48px 32px;\n    border-radius: var(--border-radius);\n    width: 100%;\n    text-align: center;\n}\n\n#imposter-result-view .result-card.imposter {\n    background: linear-gradient(135deg, #ff4444 0%, #cc0000 100%);\n}\n\n#imposter-result-view .result-card.innocent {\n    background: linear-gradient(135deg, #44cc44 0%, #009900 100%);\n}\n\n.result-name {\n    font-size: 2rem;\n    font-weight: bold;\n    color: white;\n    margin-bottom: 8px;\n}\n\n.result-role {\n    font-size: 1.5rem;\n    color: rgba(255, 255, 255, 0.9);\n    margin-bottom: 16px;\n}\n\n.result-remaining {\n    font-size: 1rem;\n    color: rgba(255, 255, 255, 0.7);\n}\n\n/* Info text styling for imposter game */\n.info-text {\n    color: var(--text-secondary);\n    text-align: center;\n    font-size: 0.95rem;\n}\n\n/* Word display variants */\n.word-display.imposter {\n    color: var(--accent-secondary) !important;\n}\n\n.word-display.innocent {\n    color: var(--accent-success) !important;\n}\n\n/* Role label variants */\n.role-label.imposter {\n    color: var(--accent-secondary);\n}\n\n.role-label.innocent {\n    color: var(--accent-success);\n}\n\n/* ============ IMPOSTER GUESS STYLES ============ */\n\n.guess-section {\n    margin-top: 1rem;\n    padding: 1rem;\n    border-top: 1px solid rgba(255,255,255,0.15);\n}\n\n.guess-label {\n    color: #ff6b6b;\n    font-size: 0.9rem;\n    margin-bottom: 0.5rem;\n    text-transform: uppercase;\n    letter-spacing: 1px;\n}\n\n.guess-input-row {\n    display: flex;\n    gap: 0.5rem;\n}\n\n.guess-input {\n    flex: 1;\n    padding: 0.75rem;\n    border-radius: 8px;\n    border: 2px solid rgba(255,107,107,0.3);\n    background: rgba(0,0,0,0.3);\n    color: white;\n    font-size: 1rem;\n    outline: none;\n}\n\n.guess-input:focus {\n    border-color: #ff6b6b;\n}\n\n.btn-guess {\n    padding: 0.75rem 1.25rem;\n    border-radius: 8px;\n    border: none;\n    background: #ff6b6b;\n    color: white;\n    font-size: 1rem;\n    font-weight: bold;\n    cursor: pointer;\n}\n\n.btn-guess:active {\n    background: #e05555;\n}\n\n.guess-feedback {\n    margin-top: 0.5rem;\n    font-size: 0.9rem;\n    text-align: center;\n    color: #ff6b6b;\n    font-weight: bold;\n}\n\n/* ============ ROUND END STYLES ============ */\n\n.round-end-card {\n    text-align: center;\n    padding: 2rem 1rem;\n    border-radius: 16px;\n    margin: 1rem;\n}\n\n.round-end-card.imposters-win {\n    background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);\n}\n\n.round-end-card.innocents-win {\n    background: linear-gradient(135deg, #2980b9 0%, #3498db 100%);\n}\n\n.round-end-winner {\n    font-size: 2rem;\n    color: white;\n    margin-bottom: 1rem;\n    text-transform: uppercase;\n    letter-spacing: 2px;\n}\n\n.round-end-word {\n    font-size: 1.5rem;\n    color: rgba(255,255,255,0.9);\n    margin-bottom: 1.5rem;\n}\n\n.round-end-imposters {\n    margin-bottom: 1.5rem;\n}\n\n.imposters-label {\n    font-size: 0.85rem;\n    color: rgba(255,255,255,0.7);\n    text-transform: uppercase;\n    letter-spacing: 1px;\n    margin-bottom: 0.25rem;\n}\n\n.imposter-names {\n    font-size: 1.2rem;\n    color: white;\n    font-weight: bold;\n}\n\n.round-end-scores {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 1rem;\n    margin-top: 1rem;\n    padding-top: 1rem;\n    border-top: 1px solid rgba(255,255,255,0.2);\n}\n\n.team-score {\n    font-size: 1.1rem;\n    font-weight: bold;\n}\n\n.imposter-score {\n    color: #ff6b6b;\n}\n\n.innocent-score {\n    color: #6bb5ff;\n}\n\n.score-divider {\n    color: rgba(255,255,255,0.4);\n    font-size: 1.2rem;\n}\n\n/* Responsive */\n@media (max-height: 600px) {\n    .screen {\n        padding: 10px;\n    }\n\n    h1 {\n        font-size: 1.5rem;\n        margin-bottom: 10px;\n    }\n\n    .card {\n        padding: 16px;\n        gap: 12px;\n    }\n\n    .prompt-card {\n        padding: 20px;\n        font-size: 1.5rem;\n    }\n}\n",
	"/index.html": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\">\n    <meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\n    <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\">\n    <title>Party Games</title>\n    <link rel=\"stylesheet\" href=\"css/style.css\">\n</head>\n<body>\n    <div id=\"app\">\n        <!-- Connection Screen -->\n        <div id=\"screen-connect\" class=\"screen active\">\n            <h1>Party Games</h1>\n            <div class=\"card\">\n                <p class=\"status\" id=\"connection-status\">Connecting to host...</p>\n                <div id=\"manual-connect\" class=\"hidden\">\n                    <input type=\"text\" id=\"host-ip\" placeholder=\"Host IP (e.g., 192.168.1.5)\">\n                    <input type=\"number\" id=\"host-port\" placeholder=\"Port\" value=\"8080\">\n                    <button id=\"btn-connect\" class=\"btn-primary\">Connect</button>\n                </div>\n            </div>\n        </div>\n\n        <!-- Join Screen -->\n        <div id=\"screen-join\" class=\"screen\">\n            <h1>Join Game</h1>\n            <div class=\"card\">\n                <input type=\"text\" id=\"player-name\" placeholder=\"Your Name\" maxlength=\"12\">\n                <div id=\"character-grid\" class=\"character-grid\">\n                    <!-- Characters populated by JS -->\n                </div>\n                <button id=\"btn-join\" class=\"btn-primary\" disabled>Join</button>\n            </div>\n        </div>\n\n        <!-- Waiting Screen -->\n        <div id=\"screen-waiting\" class=\"screen\">\n            <h1>Waiting for Host</h1>\n            <div class=\"card\">\n                <p class=\"player-name\" id=\"display-name\"></p>\n                <div class=\"character-preview\" id=\"display-character\"></div>\n                <p class=\"status\">Waiting for the game to start...</p>\n                <div id=\"players-list\" class=\"players-list\"></div>\n            </div>\n        </div>\n\n        <!-- Game: Charades -->\n        <div id=\"screen-charades\" class=\"screen\">\n            <div class=\"game-header\">\n                <span class=\"game-title\">Charades</span>\n                <span class=\"timer\" id=\"charades-timer\">60</span>\n            </div>\n\n            <div id=\"charades-actor-view\" class=\"game-content hidden\">\n                <p class=\"role-label\">You're Acting!</p>\n                <div class=\"prompt-card\" id=\"charades-prompt\">???</div>\n                <button id=\"btn-start-turn\" class=\"btn-primary\">Start My Turn</button>\n                <button id=\"btn-skip\" class=\"btn-secondary hidden\">Skip</button>\n            </div>\n\n            <div id=\"charades-guesser-view\" class=\"game-content hidden\">\n                <p class=\"role-label\">Guess what <span id=\"charades-actor-name\">???</span> is acting!</p>\n                <div class=\"prompt-card\">???</div>\n                <input type=\"text\" id=\"charades-guess\" placeholder=\"Type your guess...\">\n                <button id=\"btn-guess\" class=\"btn-primary\">Guess</button>\n            </div>\n\n            <div id=\"charades-result-view\" class=\"game-content hidden\">\n                <div class=\"result-card\" id=\"charades-result\"></div>\n            </div>\n        </div>\n\n        <!-- Game: Word Bomb -->\n        <div id=\"screen-word-bomb\" class=\"screen\">\n            <div class=\"game-header\">\n                <span class=\"game-title\">Word Bomb</span>\n                <span class=\"timer\" id=\"wordbomb-timer\">10</span>\n            </div>\n\n            <div class=\"game-content\">\n                <div class=\"lives\" id=\"wordbomb-lives\"></div>\n                <div class=\"prompt-card large\" id=\"wordbomb-letters\">PH</div>\n                <input type=\"text\" id=\"wordbomb-input\" placeholder=\"Type a word...\" autocomplete=\"off\">\n                <button id=\"btn-submit-word\" class=\"btn-primary\">Submit</button>\n                <p class=\"feedback\" id=\"wordbomb-feedback\"></p>\n            </div>\n        </div>\n\n        <!-- Game: Quick Draw -->\n        <div id=\"screen-quick-draw\" class=\"screen\">\n            <div class=\"game-header\">\n                <span class=\"game-title\">Quick Draw</span>\n                <span class=\"timer\" id=\"quickdraw-timer\">60</span>\n            </div>\n\n            <div id=\"quickdraw-drawer-view\" class=\"game-content hidden\">\n                <p class=\"role-label\">Draw this:</p>\n                <div class=\"prompt-card\" id=\"quickdraw-prompt\">???</div>\n                <canvas id=\"drawing-canvas\" width=\"300\" height=\"300\"></canvas>\n                <div class=\"drawing-tools\">\n                    <button id=\"btn-eraser\" class=\"btn-secondary\">Eraser</button>\n                    <button id=\"btn-clear\" class=\"btn-secondary\">Clear</button>\n                    <input type=\"color\" id=\"brush-color\" value=\"#ffffff\">\n                </div>\n            </div>\n\n            <div id=\"quickdraw-guesser-view\" class=\"game-content hidden\">\n                <p class=\"role-label\">Guess what <span id=\"quickdraw-drawer-name\">???</span> is drawing!</p>\n                <div class=\"drawing-display\" id=\"quickdraw-canvas-display\"></div>\n                <p id=\"quickdraw-wrong-guess\" class=\"wrong-guess\"></p>\n                <input type=\"text\" id=\"quickdraw-guess\" placeholder=\"Type your guess...\">\n                <button id=\"btn-quickdraw-guess\" class=\"btn-primary\">Guess</button>\n            </div>\n        </div>\n\n        <!-- Game: Imposter -->\n        <div id=\"screen-imposter\" class=\"screen\">\n            <div class=\"game-header\">\n                <span class=\"game-title\">Imposter</span>\n                <span class=\"imposter-count\" id=\"imposter-count-display\">? imposters</span>\n            </div>\n\n            <!-- Role/Discussion View (existing, now wrapped) -->\n            <div id=\"imposter-role-view\" class=\"game-content\">\n                <p class=\"role-label\" id=\"imposter-role-label\">Your Role</p>\n                <div class=\"prompt-card large\" id=\"imposter-word\">???</div>\n                <p class=\"info-text\" id=\"imposter-info\">? imposters among you</p>\n                <p class=\"instruction\" id=\"imposter-instruction\">Waiting for game to start...</p>\n            </div>\n\n            <!-- Voting View -->\n            <div id=\"imposter-voting-view\" class=\"game-content hidden\">\n                <p class=\"vote-instruction\">Tap a player to vote</p>\n                <div id=\"vote-player-list\" class=\"vote-list\">\n                    <!-- Dynamically populated with vote-option divs -->\n                </div>\n            </div>\n\n            <!-- Spectator View (eliminated players) -->\n            <div id=\"imposter-spectator-view\" class=\"game-content hidden\">\n                <p class=\"spectator-label\">You've been eliminated</p>\n                <p class=\"spectator-word\" id=\"spectator-word-display\"></p>\n                <p class=\"spectator-instruction\">Watch the votes unfold...</p>\n                <div id=\"spectator-vote-list\" class=\"vote-list spectator\">\n                    <!-- Dynamically populated, non-interactive -->\n                </div>\n            </div>\n\n            <!-- Consensus Warning View -->\n            <div id=\"imposter-consensus-view\" class=\"game-content hidden\">\n                <div class=\"consensus-warning\">\n                    <p class=\"consensus-text\">Consensus on</p>\n                    <p class=\"consensus-name\" id=\"consensus-target-name\">???</p>\n                    <div class=\"countdown-number\" id=\"consensus-countdown\">5</div>\n                    <p class=\"consensus-subtext\">Vote changes can stop this!</p>\n                </div>\n            </div>\n\n            <!-- Revealing View -->\n            <div id=\"imposter-reveal-view\" class=\"game-content hidden\">\n                <div class=\"reveal-card\">\n                    <p class=\"reveal-text\">Revealing...</p>\n                    <p class=\"reveal-name\" id=\"reveal-target-name\">???</p>\n                </div>\n            </div>\n\n            <!-- Result View -->\n            <div id=\"imposter-result-view\" class=\"game-content hidden\">\n                <div class=\"result-card\" id=\"result-card\">\n                    <h2 class=\"result-name\" id=\"result-player-name\">Alex</h2>\n                    <p class=\"result-role\" id=\"result-role-text\">was an IMPOSTER!</p>\n                    <p class=\"result-remaining\" id=\"result-remaining\">1 imposter remaining</p>\n                </div>\n            </div>\n\n            <!-- Guess input (imposters only, toggled by JS independently of views) -->\n            <div id=\"imposter-guess-section\" class=\"guess-section hidden\">\n                <p class=\"guess-label\">Guess the word:</p>\n                <div class=\"guess-input-row\">\n                    <input type=\"text\" id=\"imposter-guess-input\" class=\"guess-input\" placeholder=\"Enter your guess...\" autocomplete=\"off\" />\n                    <button id=\"imposter-guess-btn\" class=\"btn-guess\">Guess</button>\n                </div>\n                <p id=\"guess-feedback\" class=\"guess-feedback hidden\"></p>\n            </div>\n\n            <!-- Round End View -->\n            <div id=\"imposter-round-end-view\" class=\"game-content hidden\">\n                <div id=\"round-end-card\" class=\"round-end-card\">\n                    <h2 id=\"round-end-winner\" class=\"round-end-winner\">IMPOSTERS WIN!</h2>\n                    <p id=\"round-end-word\" class=\"round-end-word\">The word was: ???</p>\n                    <div id=\"round-end-imposters\" class=\"round-end-imposters\">\n                        <p class=\"imposters-label\">The imposters were:</p>\n                        <p id=\"round-end-imposter-names\" class=\"imposter-names\">???</p>\n                    </div>\n                    <div class=\"round-end-scores\">\n                        <span id=\"round-end-imposter-score\" class=\"team-score imposter-score\">Imposters: 0</span>\n                        <span class=\"score-divider\">|</span>\n                        <span id=\"round-end-innocent-score\" class=\"team-score innocent-score\">Innocents: 0</span>\n                    </div>\n                </div>\n        <!-- Game: Who Said It -->\n        <div id=\"screen-who-said-it\" class=\"screen\">\n            <div class=\"game-header\">\n                <span class=\"game-title\">Who Said It?</span>\n                <span class=\"timer\" id=\"whosaid-timer\">60</span>\n            </div>\n\n            <div id=\"whosaid-writing-view\" class=\"game-content hidden\">\n                <div class=\"prompt-card\" id=\"whosaid-prompt\">???</div>\n                <p class=\"role-label\">Type your answer (keep it secret!):</p>\n                <textarea id=\"whosaid-answer\" placeholder=\"Your answer...\" rows=\"3\"></textarea>\n                <button id=\"btn-submit-answer\" class=\"btn-primary\">Submit Answer</button>\n                <p class=\"status\" id=\"whosaid-answers-status\">0 answers received</p>\n            </div>\n\n            <div id=\"whosaid-voting-view\" class=\"game-content hidden\">\n                <p class=\"role-label\">Who wrote this?</p>\n                <div class=\"prompt-card\" id=\"whosaid-answer-display\">\"...\"</div>\n                <div class=\"vote-buttons\" id=\"whosaid-vote-buttons\"></div>\n                <p class=\"status\" id=\"whosaid-votes-status\">0 votes</p>\n            </div>\n\n            <div id=\"whosaid-author-view\" class=\"game-content hidden\">\n                <p class=\"role-label\">This is YOUR answer!</p>\n                <div class=\"prompt-card\" id=\"whosaid-your-answer\">\"...\"</div>\n                <p class=\"status\">Wait and see who guesses correctly...</p>\n            </div>\n\n            <div id=\"whosaid-reveal-view\" class=\"game-content hidden\">\n                <div class=\"prompt-card\" id=\"whosaid-reveal-answer\">\"...\"</div>\n                <p class=\"reveal-author\" id=\"whosaid-reveal-author\">Written by: ???</p>\n                <div class=\"reveal-results\" id=\"whosaid-reveal-results\"></div>\n            </div>\n\n            <div id=\"whosaid-ready-view\" class=\"game-content hidden\">\n                <h2 id=\"whosaid-ready-title\">Ready to Start?</h2>\n                <div class=\"players-ready-grid\" id=\"whosaid-players-ready\"></div>\n                <button id=\"btn-ready\" class=\"btn-primary btn-large\">Ready!</button>\n                <p class=\"status\" id=\"whosaid-ready-status\">0/4 ready</p>\n            </div>\n\n            <div id=\"whosaid-round-end-view\" class=\"game-content hidden\">\n                <h2 id=\"whosaid-round-complete\">Round Complete!</h2>\n                <p class=\"status\">Next round starting soon...</p>\n            </div>\n        </div>\n\n<!-- Game: Fibbage -->\n        <div id=\"screen-fibbage\" class=\"screen\">\n            <div class=\"game-header\">\n                <span class=\"game-title\">Fibbage</span>\n                <span class=\"timer\" id=\"fibbage-timer\">60</span>\n            </div>\n\n            <div id=\"fibbage-writing-view\" class=\"game-content hidden\">\n                <div class=\"prompt-card\" id=\"fibbage-question\">???</div>\n                <p class=\"role-label\">Write a believable LIE to fill in the blank:</p>\n                <textarea id=\"fibbage-answer\" placeholder=\"Your lie...\" rows=\"2\"></textarea>\n                <button id=\"btn-submit-lie\" class=\"btn-primary\">Submit Lie</button>\n                <p class=\"status\" id=\"fibbage-answers-status\">0 lies submitted</p>\n            </div>\n\n            <div id=\"fibbage-voting-view\" class=\"game-content hidden\">\n                <div class=\"prompt-card\" id=\"fibbage-vote-question\">???</div>\n                <p class=\"role-label\">Which answer is the TRUTH?</p>\n                <div class=\"vote-buttons-vertical\" id=\"fibbage-vote-buttons\"></div>\n                <p class=\"status\" id=\"fibbage-votes-status\">0 votes</p>\n            </div>\n\n            <div id=\"fibbage-reveal-view\" class=\"game-content hidden\">\n                <div class=\"prompt-card reveal-truth\" id=\"fibbage-reveal-answer\">The truth: \"...\"</div>\n                <div class=\"reveal-results\" id=\"fibbage-reveal-results\"></div>\n            </div>\n\n            <div id=\"fibbage-ready-view\" class=\"game-content hidden\">\n                <h2 id=\"fibbage-ready-title\">Ready to Lie?</h2>\n                <div class=\"players-ready-grid\" id=\"fibbage-players-ready\"></div>\n                <button id=\"btn-fibbage-ready\" class=\"btn-primary btn-large\">Ready!</button>\n                <p class=\"status\" id=\"fibbage-ready-status\">0/4 ready</p>\n            </div>\n\n            <div id=\"fibbage-round-end-view\" class=\"game-content hidden\">\n                <h2 id=\"fibbage-round-complete\">Round Complete!</h2>\n                <p class=\"status\">Next round starting soon...</p>\n            </div>\n        </div>\n\n        <!-- Game: Trivia Showdown -->\n        <div id=\"screen-trivia\" class=\"screen\">\n            <div class=\"game-header\">\n                <span class=\"game-title\">Trivia Showdown</span>\n                <span class=\"timer\" id=\"trivia-timer\">15</span>\n            </div>\n\n            <div id=\"trivia-ready-view\" class=\"game-content hidden\">\n                <h2 id=\"trivia-ready-title\">Ready to Start?</h2>\n                <div class=\"players-ready-grid\" id=\"trivia-players-ready\"></div>\n                <button id=\"btn-trivia-ready\" class=\"btn-primary btn-large\">Ready!</button>\n                <p class=\"status\" id=\"trivia-ready-status\">0/4 ready</p>\n            </div>\n\n            <div id=\"trivia-question-view\" class=\"game-content hidden\">\n                <div class=\"trivia-question-header\">\n                    <span class=\"category\" id=\"trivia-category\">Science</span>\n                    <span class=\"question-num\" id=\"trivia-question-num\">Question 1/10</span>\n                </div>\n                <div class=\"prompt-card\" id=\"trivia-question-text\">???</div>\n                <div class=\"trivia-answers\" id=\"trivia-answer-buttons\"></div>\n                <p class=\"status\" id=\"trivia-answer-status\">0 answered</p>\n            </div>\n\n            <div id=\"trivia-result-view\" class=\"game-content hidden\">\n                <h2 id=\"trivia-result-label\" class=\"result-correct\">Correct!</h2>\n                <p class=\"points-earned\" id=\"trivia-points-label\">+150 points</p>\n                <p class=\"correct-answer\" id=\"trivia-correct-answer\">Answer: Au</p>\n            </div>\n\n            <div id=\"trivia-leaderboard-view\" class=\"game-content hidden\">\n                <h2 id=\"trivia-leaderboard-title\">Leaderboard</h2>\n                <div class=\"leaderboard-list\" id=\"trivia-leaderboard-list\"></div>\n            </div>\n\n            <div id=\"trivia-round-end-view\" class=\"game-content hidden\">\n                <h2 id=\"trivia-round-complete\">Round Complete!</h2>\n                <p class=\"round-winner\" id=\"trivia-round-winner\">Winner: ???</p>\n                <p class=\"status\">Next round starting soon...</p>\n            </div>\n        </div>\n\n        <!-- Game Over Screen -->\n        <div id=\"screen-game-over\" class=\"screen\">\n            <h1>Game Over!</h1>\n            <div class=\"card\">\n                <div class=\"winner\" id=\"winner-display\"></div>\n                <div class=\"final-scores\" id=\"final-scores\"></div>\n                <p class=\"status\">Returning to lobby...</p>\n            </div>\n        </div>\n\n        <!-- Disconnected Screen -->\n        <div id=\"screen-disconnected\" class=\"screen\">\n            <h1>Disconnected</h1>\n            <div class=\"card\">\n                <p class=\"status\">Lost connection to host</p>\n                <button id=\"btn-reconnect\" class=\"btn-primary\">Try Again</button>\n            </div>\n        </div>\n    </div>\n\n    <script src=\"js/websocket.js\"></script>\n    <script src=\"js/games/charades.js\"></script>\n    <script src=\"js/games/wordbomb.js\"></script>\n    <script src=\"js/games/quickdraw.js\"></script>\n    <script src=\"js/games/imposter.js\"></script>\n    <script src=\"js/games/whosaidit.js\"></script>\n    <script src=\"js/games/fibbage.js\"></script>\n    <script src=\"js/games/trivia.js\"></script>\n    <script src=\"js/app.js\"></script>\n</body>\n</html>\n",
	"/js/app.js": "/**\n * Main application controller for Party Games web player\n */\nclass PartyGameApp {\n    constructor() {\n        this.currentScreen = 'connect';\n        this.playerId = null;\n        this.playerName = '';\n        this.characterId = 0;\n        this.players = {};\n        this.currentGame = null;\n\n        // Character data (must match Godot's GameManager.CHARACTERS)\n        this.characters = [\n            { id: 0, name: 'Red Knight', color: '#ff0000' },\n            { id: 1, name: 'Blue Wizard', color: '#0000ff' },\n            { id: 2, name: 'Green Ranger', color: '#00ff00' },\n            { id: 3, name: 'Yellow Bard', color: '#ffff00' },\n            { id: 4, name: 'Purple Rogue', color: '#800080' },\n            { id: 5, name: 'Orange Monk', color: '#ffa500' },\n            { id: 6, name: 'Pink Princess', color: '#ffc0cb' },\n            { id: 7, name: 'Teal Robot', color: '#008080' }\n        ];\n\n        this.takenCharacters = [];\n        this.selectedCharacter = null;\n\n        this.init();\n    }\n\n    init() {\n        this.setupEventListeners();\n        this.setupSocketHandlers();\n        this.tryAutoConnect();\n    }\n\n    /**\n     * Set up DOM event listeners\n     */\n    setupEventListeners() {\n        // Connect screen\n        document.getElementById('btn-connect')?.addEventListener('click', () => {\n            const ip = document.getElementById('host-ip').value.trim();\n            const port = parseInt(document.getElementById('host-port').value) || 8080;\n            if (ip) {\n                gameSocket.connect(ip, port);\n            }\n        });\n\n        // Join screen\n        document.getElementById('player-name')?.addEventListener('input', (e) => {\n            this.playerName = e.target.value.trim();\n            this.updateJoinButton();\n        });\n\n        document.getElementById('btn-join')?.addEventListener('click', () => {\n            if (this.playerName && this.selectedCharacter !== null) {\n                gameSocket.requestJoin(this.playerName, this.selectedCharacter);\n            }\n        });\n\n        // Reconnect button\n        document.getElementById('btn-reconnect')?.addEventListener('click', () => {\n            gameSocket.reconnectAttempts = 0;\n            gameSocket.connect();\n        });\n    }\n\n    /**\n     * Set up WebSocket message handlers\n     */\n    setupSocketHandlers() {\n        gameSocket.on('connected', () => {\n            document.getElementById('connection-status').textContent = 'Connected! Enter your name to join.';\n            this.showScreen('join');\n            this.populateCharacterGrid();\n        });\n\n        gameSocket.on('disconnected', () => {\n            this.showScreen('disconnected');\n        });\n\n        gameSocket.on('error', (data) => {\n            document.getElementById('connection-status').textContent = data.message || 'Connection failed';\n            document.getElementById('manual-connect').classList.remove('hidden');\n        });\n\n        gameSocket.on('join_accepted', (data) => {\n            this.playerId = data.player_id;\n            this.players = data.players || {};\n            this.showScreen('waiting');\n            this.updateWaitingScreen();\n        });\n\n        gameSocket.on('player_joined', (data) => {\n            this.players[data.player_id] = {\n                name: data.name,\n                character: data.character\n            };\n            this.updatePlayersList();\n            // Mark character as taken\n            if (!this.takenCharacters.includes(data.character)) {\n                this.takenCharacters.push(data.character);\n                this.updateCharacterGrid();\n            }\n        });\n\n        gameSocket.on('player_left', (data) => {\n            if (this.players[data.player_id]) {\n                const char = this.players[data.player_id].character;\n                delete this.players[data.player_id];\n                // Unmark character\n                const idx = this.takenCharacters.indexOf(char);\n                if (idx !== -1) this.takenCharacters.splice(idx, 1);\n                this.updatePlayersList();\n                this.updateCharacterGrid();\n            }\n        });\n\n        gameSocket.on('game_starting', (data) => {\n            this.currentGame = data.game;\n            this.startGame(data.game);\n        });\n\n        gameSocket.on('host_left', () => {\n            this.showScreen('disconnected');\n        });\n    }\n\n    /**\n     * Try to auto-connect using URL parameters\n     */\n    tryAutoConnect() {\n        if (gameSocket.parseURLParams()) {\n            document.getElementById('connection-status').textContent = 'Connecting to host...';\n            gameSocket.connect();\n        } else {\n            document.getElementById('connection-status').textContent = 'Enter host details to connect';\n            document.getElementById('manual-connect').classList.remove('hidden');\n        }\n    }\n\n    /**\n     * Show a specific screen\n     */\n    showScreen(screenId) {\n        document.querySelectorAll('.screen').forEach(screen => {\n            screen.classList.remove('active');\n        });\n        const screen = document.getElementById(`screen-${screenId}`);\n        if (screen) {\n            screen.classList.add('active');\n            this.currentScreen = screenId;\n        }\n    }\n\n    /**\n     * Populate the character selection grid\n     */\n    populateCharacterGrid() {\n        const grid = document.getElementById('character-grid');\n        if (!grid) return;\n\n        grid.innerHTML = '';\n\n        this.characters.forEach(char => {\n            const div = document.createElement('div');\n            div.className = 'character-option';\n            div.style.backgroundColor = char.color;\n            div.dataset.id = char.id;\n            div.title = char.name;\n\n            if (this.takenCharacters.includes(char.id)) {\n                div.classList.add('taken');\n            }\n\n            div.addEventListener('click', () => {\n                if (!this.takenCharacters.includes(char.id)) {\n                    this.selectCharacter(char.id);\n                }\n            });\n\n            grid.appendChild(div);\n        });\n    }\n\n    /**\n     * Update character grid to show taken characters\n     */\n    updateCharacterGrid() {\n        document.querySelectorAll('.character-option').forEach(div => {\n            const id = parseInt(div.dataset.id);\n            if (this.takenCharacters.includes(id)) {\n                div.classList.add('taken');\n            } else {\n                div.classList.remove('taken');\n            }\n        });\n    }\n\n    /**\n     * Select a character\n     */\n    selectCharacter(id) {\n        this.selectedCharacter = id;\n        this.characterId = id;\n\n        document.querySelectorAll('.character-option').forEach(div => {\n            div.classList.remove('selected');\n            if (parseInt(div.dataset.id) === id) {\n                div.classList.add('selected');\n            }\n        });\n\n        this.updateJoinButton();\n    }\n\n    /**\n     * Update join button state\n     */\n    updateJoinButton() {\n        const btn = document.getElementById('btn-join');\n        if (btn) {\n            btn.disabled = !(this.playerName && this.selectedCharacter !== null);\n        }\n    }\n\n    /**\n     * Update the waiting screen with player info\n     */\n    updateWaitingScreen() {\n        document.getElementById('display-name').textContent = this.playerName;\n\n        const preview = document.getElementById('display-character');\n        if (preview && this.characters[this.characterId]) {\n            preview.style.backgroundColor = this.characters[this.characterId].color;\n        }\n\n        this.updatePlayersList();\n    }\n\n    /**\n     * Update the players list display\n     */\n    updatePlayersList() {\n        const list = document.getElementById('players-list');\n        if (!list) return;\n\n        list.innerHTML = '';\n\n        Object.entries(this.players).forEach(([id, player]) => {\n            const chip = document.createElement('div');\n            chip.className = 'player-chip';\n\n            const dot = document.createElement('span');\n            dot.className = 'dot';\n            dot.style.backgroundColor = this.characters[player.character]?.color || '#888';\n\n            const name = document.createElement('span');\n            name.textContent = player.name;\n\n            chip.appendChild(dot);\n            chip.appendChild(name);\n            list.appendChild(chip);\n        });\n    }\n\n    /**\n     * Start a specific game\n     */\n    startGame(gameId) {\n        console.log('Starting game:', gameId);\n\n        switch (gameId) {\n            case 'charades':\n                this.showScreen('charades');\n                if (window.charadesGame) {\n                    charadesGame.init(this);\n                }\n                break;\n\n            case 'word_bomb':\n                this.showScreen('word-bomb');\n                if (window.wordBombGame) {\n                    wordBombGame.init(this);\n                }\n                break;\n\n            case 'quick_draw':\n                this.showScreen('quick-draw');\n                if (window.quickDrawGame) {\n                    quickDrawGame.init(this);\n                }\n                break;\n\n            case 'imposter':\n                this.showScreen('imposter');\n                if (window.imposterGame) {\n                    imposterGame.init(this);\n                }\n                break;\n\n            case 'who_said_it':\n                this.showScreen('who-said-it');\n                if (window.whoSaidItGame) {\n                    whoSaidItGame.init(this);\n                }\n                break;\n\ncase 'fibbage':\n                this.showScreen('fibbage');\n                if (window.fibbageGame) {\n                    fibbageGame.init(this);\n                }\n                break;\n\n            case 'trivia_showdown':\n                this.showScreen('trivia');\n                if (window.triviaGame) {\n                    triviaGame.init(this);\n                }\n                break;\n\n            default:\n                console.warn('Unknown game:', gameId);\n        }\n    }\n\n    /**\n     * Return to waiting screen (called when game ends)\n     */\n    returnToLobby() {\n        this.currentGame = null;\n        this.showScreen('waiting');\n    }\n\n    /**\n     * Get player name by ID\n     */\n    getPlayerName(playerId) {\n        return this.players[playerId]?.name || 'Unknown';\n    }\n\n    /**\n     * Get character color by ID\n     */\n    getCharacterColor(characterId) {\n        return this.characters[characterId]?.color || '#888888';\n    }\n}\n\n// Initialize app when DOM is ready\ndocument.addEventListener('DOMContentLoaded', () => {\n    window.app = new PartyGameApp();\n});\n",
	"/js/games/charades.js": "/**\n * Charades game handler for web player\n */\nclass CharadesGame {\n    constructor() {\n        this.app = null;\n        this.isActor = false;\n        this.actorId = null;\n        this.timeRemaining = 60;\n        this.timerInterval = null;\n    }\n\n    init(app) {\n        this.app = app;\n        this.setupEventListeners();\n        this.setupSocketHandlers();\n    }\n\n    setupEventListeners() {\n        document.getElementById('btn-start-turn')?.addEventListener('click', () => {\n            gameSocket.send({ type: 'charades_start_turn' });\n        });\n\n        document.getElementById('btn-skip')?.addEventListener('click', () => {\n            gameSocket.send({ type: 'charades_skip' });\n        });\n\n        document.getElementById('btn-guess')?.addEventListener('click', () => {\n            this.submitGuess();\n        });\n\n        document.getElementById('charades-guess')?.addEventListener('keypress', (e) => {\n            if (e.key === 'Enter') {\n                this.submitGuess();\n            }\n        });\n    }\n\n    setupSocketHandlers() {\n        gameSocket.on('charades_init', (data) => {\n            // Game initialized, wait for first turn\n        });\n\n        gameSocket.on('charades_prepare', (data) => {\n            this.handlePrepare(data);\n        });\n\n        gameSocket.on('charades_turn', (data) => {\n            this.handleTurn(data);\n        });\n\n        gameSocket.on('charades_wrong', (data) => {\n            this.handleWrongGuess(data);\n        });\n\n        gameSocket.on('charades_result', (data) => {\n            this.handleResult(data);\n        });\n\n        gameSocket.on('charades_skipped', (data) => {\n            this.handleSkipped(data);\n        });\n\n        gameSocket.on('charades_timeout', (data) => {\n            this.handleTimeout(data);\n        });\n\n        gameSocket.on('charades_end', (data) => {\n            this.handleGameEnd(data);\n        });\n    }\n\n    handlePrepare(data) {\n        this.actorId = data.actor_id;\n        this.isActor = (data.actor_id === this.app.playerId);\n        this.timeRemaining = 60;\n\n        this.updateTimerDisplay();\n        this.stopTimer();\n\n        // Hide all views first\n        this.hideAllViews();\n\n        if (this.isActor) {\n            // Show actor prepare view\n            document.getElementById('charades-actor-view').classList.remove('hidden');\n            document.getElementById('charades-prompt').textContent = 'Get Ready!';\n            document.getElementById('btn-start-turn').classList.remove('hidden');\n            document.getElementById('btn-skip').classList.add('hidden');\n        } else {\n            // Show waiting message\n            document.getElementById('charades-guesser-view').classList.remove('hidden');\n            document.getElementById('charades-actor-name').textContent = this.app.getPlayerName(data.actor_id);\n            document.getElementById('charades-guess').disabled = true;\n            document.getElementById('btn-guess').disabled = true;\n        }\n    }\n\n    handleTurn(data) {\n        this.actorId = data.actor_id;\n        this.isActor = (data.actor_id === this.app.playerId);\n        this.timeRemaining = data.time || 60;\n\n        this.hideAllViews();\n\n        if (this.isActor) {\n            // Show prompt to actor\n            document.getElementById('charades-actor-view').classList.remove('hidden');\n            document.getElementById('charades-prompt').textContent = data.prompt;\n            document.getElementById('btn-start-turn').classList.add('hidden');\n            document.getElementById('btn-skip').classList.remove('hidden');\n        } else {\n            // Show guess interface\n            document.getElementById('charades-guesser-view').classList.remove('hidden');\n            document.getElementById('charades-actor-name').textContent = this.app.getPlayerName(data.actor_id);\n            document.getElementById('charades-guess').disabled = false;\n            document.getElementById('charades-guess').value = '';\n            document.getElementById('charades-guess').focus();\n            document.getElementById('btn-guess').disabled = false;\n        }\n\n        this.startTimer();\n    }\n\n    handleWrongGuess(data) {\n        // Could show a brief feedback that someone guessed wrong\n        console.log(`${data.player_name} guessed: ${data.guess}`);\n    }\n\n    handleResult(data) {\n        this.stopTimer();\n        this.hideAllViews();\n\n        const resultView = document.getElementById('charades-result-view');\n        const resultCard = document.getElementById('charades-result');\n        resultView.classList.remove('hidden');\n\n        if (data.correct) {\n            const guesserName = this.app.getPlayerName(data.guesser_id);\n            const actorName = this.app.getPlayerName(data.actor_id);\n            resultCard.innerHTML = `\n                <h2>Correct!</h2>\n                <div class=\"answer\">${data.prompt}</div>\n                <p>${guesserName} guessed it! (+100 pts)</p>\n                <p>${actorName} acted it! (+50 pts)</p>\n            `;\n        }\n    }\n\n    handleSkipped(data) {\n        // Timer continues running - no reset\n\n        if (this.isActor) {\n            // Actor sees the new prompt\n            document.getElementById('charades-prompt').textContent = data.prompt;\n        } else {\n            // Guesser sees feedback that phrase was skipped\n            const actorName = document.getElementById('charades-actor-name');\n            if (actorName) {\n                actorName.textContent = this.app.getPlayerName(this.actorId) + ' - New phrase!';\n            }\n        }\n    }\n\n    handleTimeout(data) {\n        this.stopTimer();\n        this.hideAllViews();\n\n        const resultView = document.getElementById('charades-result-view');\n        const resultCard = document.getElementById('charades-result');\n        resultView.classList.remove('hidden');\n\n        resultCard.innerHTML = `\n            <h2>Time's Up!</h2>\n            <div class=\"answer\">${data.prompt}</div>\n            <p>Nobody guessed it in time.</p>\n        `;\n    }\n\n    handleGameEnd(data) {\n        this.stopTimer();\n        this.app.showScreen('game-over');\n\n        const winnerDisplay = document.getElementById('winner-display');\n        winnerDisplay.innerHTML = `\n            <h2>Winner</h2>\n            <div class=\"name\">${data.winner_name}</div>\n        `;\n\n        const scoresDisplay = document.getElementById('final-scores');\n        scoresDisplay.innerHTML = '';\n\n        // Sort by score\n        const sortedScores = Object.entries(data.final_scores)\n            .sort((a, b) => b[1] - a[1]);\n\n        sortedScores.forEach(([playerId, score]) => {\n            const row = document.createElement('div');\n            row.className = 'score-row';\n            row.innerHTML = `\n                <span>${this.app.getPlayerName(playerId)}</span>\n                <span>${score}</span>\n            `;\n            scoresDisplay.appendChild(row);\n        });\n\n        // Return to lobby after delay\n        setTimeout(() => {\n            this.app.returnToLobby();\n        }, 5000);\n    }\n\n    submitGuess() {\n        const input = document.getElementById('charades-guess');\n        const guess = input.value.trim();\n\n        if (guess) {\n            gameSocket.send({\n                type: 'charades_guess',\n                guess: guess\n            });\n            input.value = '';\n        }\n    }\n\n    hideAllViews() {\n        document.getElementById('charades-actor-view')?.classList.add('hidden');\n        document.getElementById('charades-guesser-view')?.classList.add('hidden');\n        document.getElementById('charades-result-view')?.classList.add('hidden');\n    }\n\n    startTimer() {\n        this.stopTimer();\n        this.timerInterval = setInterval(() => {\n            this.timeRemaining--;\n            this.updateTimerDisplay();\n\n            if (this.timeRemaining <= 0) {\n                this.stopTimer();\n            }\n        }, 1000);\n    }\n\n    stopTimer() {\n        if (this.timerInterval) {\n            clearInterval(this.timerInterval);\n            this.timerInterval = null;\n        }\n    }\n\n    updateTimerDisplay() {\n        const timer = document.getElementById('charades-timer');\n        if (timer) {\n            timer.textContent = this.timeRemaining;\n            timer.classList.toggle('warning', this.timeRemaining <= 10);\n        }\n    }\n}\n\n// Global instance\nwindow.charadesGame = new CharadesGame();\n",
	"/js/games/fibbage.js": "/**\n * Fibbage game handler for web player\n */\nclass FibbageGame {\n    constructor() {\n        this.app = null;\n        this.timeRemaining = 60;\n        this.timerInterval = null;\n        this.currentPhase = 'waiting';\n        this.hasSubmittedAnswer = false;\n        this.hasVoted = false;\n        this.isReady = false;\n        this.playersReady = {};\n        this.answers = [];\n    }\n\n    init(app) {\n        this.app = app;\n        this.setupEventListeners();\n        this.setupSocketHandlers();\n    }\n\n    setupEventListeners() {\n        document.getElementById('btn-submit-lie')?.addEventListener('click', () => {\n            this.submitAnswer();\n        });\n\n        document.getElementById('fibbage-answer')?.addEventListener('keypress', (e) => {\n            if (e.key === 'Enter' && !e.shiftKey) {\n                e.preventDefault();\n                this.submitAnswer();\n            }\n        });\n\n        document.getElementById('btn-fibbage-ready')?.addEventListener('click', () => {\n            this.submitReady();\n        });\n    }\n\n    setupSocketHandlers() {\n        gameSocket.on('fibbage_init', (data) => {\n            this.playersReady = {};\n            (data.player_order || []).forEach(pid => {\n                this.playersReady[pid] = false;\n            });\n        });\n\n        gameSocket.on('fibbage_pre_round', (data) => {\n            this.handlePreRound(data);\n        });\n\n        gameSocket.on('fibbage_ready_status', (data) => {\n            this.handleReadyStatus(data);\n        });\n\n        gameSocket.on('fibbage_question', (data) => {\n            this.handleQuestion(data);\n        });\n\n        gameSocket.on('fibbage_answer_received', (data) => {\n            this.handleAnswerReceived(data);\n        });\n\n        gameSocket.on('fibbage_answer_rejected', (data) => {\n            this.handleAnswerRejected(data);\n        });\n\n        gameSocket.on('fibbage_vote_start', (data) => {\n            this.handleVoteStart(data);\n        });\n\n        gameSocket.on('fibbage_vote_received', (data) => {\n            this.handleVoteReceived(data);\n        });\n\n        gameSocket.on('fibbage_reveal', (data) => {\n            this.handleReveal(data);\n        });\n\n        gameSocket.on('fibbage_round_end', (data) => {\n            this.handleRoundEnd(data);\n        });\n\n        gameSocket.on('fibbage_end', (data) => {\n            this.handleGameEnd(data);\n        });\n    }\n\n    handlePreRound(data) {\n        this.currentPhase = 'pre_round';\n        this.isReady = false;\n\n        const readyList = data.ready_players || [];\n        Object.keys(this.playersReady).forEach(pid => {\n            this.playersReady[pid] = readyList.includes(pid);\n        });\n\n        this.hideAllViews();\n        document.getElementById('fibbage-ready-view').classList.remove('hidden');\n\n        const nextRound = data.round || 1;\n        const title = nextRound === 1 ? 'Ready to Lie?' : `Round ${nextRound}`;\n        document.getElementById('fibbage-ready-title').textContent = title;\n        document.getElementById('btn-fibbage-ready').textContent = 'Ready!';\n        document.getElementById('btn-fibbage-ready').disabled = false;\n        document.getElementById('fibbage-ready-status').textContent = `${readyList.length}/${Object.keys(this.playersReady).length} ready`;\n\n        this.updatePlayerReadyIndicators();\n    }\n\n    handleReadyStatus(data) {\n        const readyList = data.ready_players || [];\n        const readyCount = data.ready_count || 0;\n        const needed = data.players_needed || Object.keys(this.playersReady).length;\n\n        Object.keys(this.playersReady).forEach(pid => {\n            this.playersReady[pid] = readyList.includes(pid);\n        });\n\n        document.getElementById('fibbage-ready-status').textContent = `${readyCount}/${needed} ready`;\n        this.updatePlayerReadyIndicators();\n    }\n\n    handleQuestion(data) {\n        this.currentPhase = 'writing';\n        this.hasSubmittedAnswer = false;\n        this.timeRemaining = data.time_limit || 60;\n\n        this.hideAllViews();\n        document.getElementById('fibbage-writing-view').classList.remove('hidden');\n\n        document.getElementById('fibbage-question').textContent = data.question;\n        document.getElementById('fibbage-answer').value = '';\n        document.getElementById('fibbage-answer').disabled = false;\n        document.getElementById('btn-submit-lie').disabled = false;\n        document.getElementById('fibbage-answers-status').textContent = '0 lies submitted';\n\n        this.startTimer();\n    }\n\n    handleAnswerReceived(data) {\n        document.getElementById('fibbage-answers-status').textContent =\n            `${data.answers_received}/${data.answers_needed} lies submitted`;\n    }\n\n    handleAnswerRejected(data) {\n        // Re-enable the input so player can try again\n        this.hasSubmittedAnswer = false;\n        const input = document.getElementById('fibbage-answer');\n        input.disabled = false;\n        input.value = '';\n        document.getElementById('btn-submit-lie').disabled = false;\n\n        const status = document.getElementById('fibbage-answers-status');\n        status.textContent = data.reason || 'Too close to the truth! Try a different lie.';\n        status.style.color = 'var(--accent-secondary)';\n    }\n\n    handleVoteStart(data) {\n        this.currentPhase = 'voting';\n        this.hasVoted = false;\n        this.answers = data.answers || [];\n        this.timeRemaining = data.time_limit || 30;\n\n        this.hideAllViews();\n        document.getElementById('fibbage-voting-view').classList.remove('hidden');\n\n        document.getElementById('fibbage-vote-question').textContent = data.question;\n        this.populateVoteButtons();\n\n        document.getElementById('fibbage-votes-status').textContent = '0 votes';\n        this.startTimer();\n    }\n\n    populateVoteButtons() {\n        const container = document.getElementById('fibbage-vote-buttons');\n        container.innerHTML = '';\n\n        this.answers.forEach((answer) => {\n            const btn = document.createElement('button');\n            btn.className = 'btn-vote-answer';\n            btn.textContent = answer.text;\n            btn.addEventListener('click', () => this.submitVote(answer.id));\n            container.appendChild(btn);\n        });\n    }\n\n    handleVoteReceived(data) {\n        document.getElementById('fibbage-votes-status').textContent =\n            `${data.votes_received}/${data.votes_needed} votes`;\n    }\n\n    handleReveal(data) {\n        this.currentPhase = 'reveal';\n        this.stopTimer();\n\n        this.hideAllViews();\n        document.getElementById('fibbage-reveal-view').classList.remove('hidden');\n\n        document.getElementById('fibbage-reveal-answer').textContent = `The truth: \"${data.real_answer}\"`;\n\n        const resultsContainer = document.getElementById('fibbage-reveal-results');\n        resultsContainer.innerHTML = '';\n\n        // Show correct guessers\n        if (data.correct_guessers && data.correct_guessers.length > 0) {\n            data.correct_guessers.forEach(playerId => {\n                const playerName = this.app.getPlayerName(playerId);\n                const div = document.createElement('div');\n                div.className = 'result-correct';\n                div.textContent = `${playerName} found the truth! (+200 pts)`;\n                resultsContainer.appendChild(div);\n            });\n        } else {\n            const div = document.createElement('div');\n            div.className = 'result-wrong';\n            div.textContent = 'Nobody found the truth!';\n            resultsContainer.appendChild(div);\n        }\n\n        // Show who fooled whom\n        if (data.fooled_by) {\n            Object.entries(data.fooled_by).forEach(([authorId, fooledList]) => {\n                const authorName = this.app.getPlayerName(authorId);\n                const count = fooledList.length;\n                const div = document.createElement('div');\n                div.className = 'result-fooled';\n                div.textContent = `${authorName} fooled ${count} player(s)! (+${count * 100} pts)`;\n                resultsContainer.appendChild(div);\n            });\n        }\n    }\n\n    handleRoundEnd(data) {\n        this.currentPhase = 'round_end';\n        this.stopTimer();\n\n        this.hideAllViews();\n        document.getElementById('fibbage-round-end-view').classList.remove('hidden');\n        document.getElementById('fibbage-round-complete').textContent = `Round ${data.round} Complete!`;\n    }\n\n    handleGameEnd(data) {\n        this.stopTimer();\n        this.app.showScreen('game-over');\n\n        const winnerDisplay = document.getElementById('winner-display');\n        winnerDisplay.innerHTML = `\n            <h2>Winner</h2>\n            <div class=\"name\">${data.winner_name}</div>\n        `;\n\n        const scoresDisplay = document.getElementById('final-scores');\n        scoresDisplay.innerHTML = '';\n\n        const sortedScores = Object.entries(data.final_scores)\n            .sort((a, b) => b[1] - a[1]);\n\n        sortedScores.forEach(([playerId, score]) => {\n            const row = document.createElement('div');\n            row.className = 'score-row';\n            row.innerHTML = `\n                <span>${this.app.getPlayerName(playerId)}</span>\n                <span>${score}</span>\n            `;\n            scoresDisplay.appendChild(row);\n        });\n\n        setTimeout(() => {\n            this.app.returnToLobby();\n        }, 5000);\n    }\n\n    submitAnswer() {\n        if (this.hasSubmittedAnswer) return;\n\n        const input = document.getElementById('fibbage-answer');\n        const answer = input.value.trim();\n\n        if (!answer) return;\n\n        this.hasSubmittedAnswer = true;\n        input.disabled = true;\n        document.getElementById('btn-submit-lie').disabled = true;\n\n        gameSocket.send({\n            type: 'fibbage_answer',\n            player_id: this.app.playerId,\n            answer: answer\n        });\n    }\n\n    submitVote(answerId) {\n        if (this.hasVoted) return;\n\n        this.hasVoted = true;\n\n        // Disable all vote buttons\n        document.querySelectorAll('.btn-vote-answer').forEach(btn => {\n            btn.disabled = true;\n        });\n\n        gameSocket.send({\n            type: 'fibbage_vote',\n            player_id: this.app.playerId,\n            answer_id: answerId\n        });\n    }\n\n    submitReady() {\n        if (this.isReady) return;\n\n        this.isReady = true;\n        document.getElementById('btn-fibbage-ready').disabled = true;\n\n        gameSocket.send({\n            type: 'fibbage_ready',\n            player_id: this.app.playerId\n        });\n    }\n\n    updatePlayerReadyIndicators() {\n        const container = document.getElementById('fibbage-players-ready');\n        if (!container) return;\n\n        container.innerHTML = '';\n\n        Object.entries(this.app.players).forEach(([playerId, player]) => {\n            const isPlayerReady = this.playersReady[playerId] || false;\n            const div = document.createElement('div');\n            div.className = `player-ready-indicator ${isPlayerReady ? 'ready' : ''}`;\n\n            const color = this.app.getCharacterColor(player.character);\n            div.innerHTML = `\n                <div class=\"player-avatar\" style=\"background-color: ${color}\">\n                    ${isPlayerReady ? '<span class=\"checkmark\"></span>' : ''}\n                </div>\n                <span class=\"player-name\">${player.name}</span>\n            `;\n            container.appendChild(div);\n        });\n    }\n\n    hideAllViews() {\n        document.getElementById('fibbage-writing-view')?.classList.add('hidden');\n        document.getElementById('fibbage-voting-view')?.classList.add('hidden');\n        document.getElementById('fibbage-reveal-view')?.classList.add('hidden');\n        document.getElementById('fibbage-ready-view')?.classList.add('hidden');\n        document.getElementById('fibbage-round-end-view')?.classList.add('hidden');\n    }\n\n    startTimer() {\n        this.stopTimer();\n        this.updateTimerDisplay();\n\n        this.timerInterval = setInterval(() => {\n            this.timeRemaining--;\n            this.updateTimerDisplay();\n\n            if (this.timeRemaining <= 0) {\n                this.stopTimer();\n            }\n        }, 1000);\n    }\n\n    stopTimer() {\n        if (this.timerInterval) {\n            clearInterval(this.timerInterval);\n            this.timerInterval = null;\n        }\n    }\n\n    updateTimerDisplay() {\n        const timer = document.getElementById('fibbage-timer');\n        if (timer) {\n            timer.textContent = this.timeRemaining;\n            timer.classList.toggle('warning', this.timeRemaining <= 10);\n        }\n    }\n}\n\n// Global instance\nwindow.fibbageGame = new FibbageGame();\n",
	"/js/games/imposter.js": "/**\n * Imposter game handler for web player\n */\nclass ImposterGame {\n    constructor() {\n        this.app = null;\n        this.isImposter = false;\n        this.secretWord = \"\";\n        this.imposterCount = 0;\n        this.totalPlayers = 0;\n\n        // Voting state\n        this.currentState = '';\n        this.votes = {};\n        this.tallies = {};\n        this.myVote = null;\n        this.players = [];\n        this.consensusTarget = null;\n        this.countdown = 5;\n        this.isEliminated = false;\n        this.myPlayerId = null;\n    }\n\n    init(app) {\n        this.app = app;\n        this.myPlayerId = app.playerId;\n        this.setupSocketHandlers();\n    }\n\n    setupSocketHandlers() {\n        gameSocket.on('imposter_role', (data) => {\n            this.handleRoleAssignment(data);\n        });\n\n        gameSocket.on('discussion_started', (data) => {\n            // Discussion phase is free-form, just update UI if needed\n            this.updateDiscussionUI();\n        });\n\n        // Voting phase handlers\n        gameSocket.on('voting_started', (data) => {\n            this.handleVotingStarted(data);\n        });\n\n        gameSocket.on('vote_update', (data) => {\n            this.handleVoteUpdate(data);\n        });\n\n        gameSocket.on('consensus_warning', (data) => {\n            this.handleConsensusWarning(data);\n        });\n\n        gameSocket.on('consensus_countdown', (data) => {\n            this.handleConsensusCountdown(data);\n        });\n\n        gameSocket.on('consensus_cancelled', () => {\n            this.handleConsensusCancelled();\n        });\n\n        gameSocket.on('reveal_start', (data) => {\n            this.handleRevealStart(data);\n        });\n\n        gameSocket.on('reveal_result', (data) => {\n            this.handleRevealResult(data);\n        });\n\n        gameSocket.on('voting_resumed', (data) => {\n            this.handleVotingResumed(data);\n        });\n\n        gameSocket.on('word_revealed', (data) => {\n            this.handleWordRevealed(data);\n        });\n\n        gameSocket.on('guess_result', (data) => {\n            this.handleGuessResult(data);\n        });\n\n        gameSocket.on('round_end', (data) => {\n            this.handleRoundEnd(data);\n        });\n\n        gameSocket.on('round_restart', (data) => {\n            this.handleRoundRestart(data);\n        });\n    }\n\n    handleRoleAssignment(data) {\n        this.isImposter = data.is_imposter;\n        this.secretWord = data.word || \"\";\n        this.imposterCount = data.imposter_count || 1;\n        this.totalPlayers = data.total_players || 0;\n\n        // Reset voting state for new game\n        this.currentState = '';\n        this.votes = {};\n        this.tallies = {};\n        this.myVote = null;\n        this.players = [];\n        this.consensusTarget = null;\n        this.countdown = 5;\n        this.isEliminated = false;\n\n        this.showRoleScreen();\n    }\n\n    showView(viewId) {\n        const views = [\n            'imposter-role-view',\n            'imposter-voting-view',\n            'imposter-spectator-view',\n            'imposter-consensus-view',\n            'imposter-reveal-view',\n            'imposter-result-view',\n            'imposter-round-end-view'\n        ];\n\n        views.forEach(id => {\n            const el = document.getElementById(id);\n            if (el) {\n                if (id === viewId) {\n                    el.classList.remove('hidden');\n                } else {\n                    el.classList.add('hidden');\n                }\n            }\n        });\n    }\n\n    toggleGuessSection(show) {\n        const section = document.getElementById('imposter-guess-section');\n        if (section) {\n            if (show) {\n                section.classList.remove('hidden');\n            } else {\n                section.classList.add('hidden');\n            }\n        }\n    }\n\n    setupGuessInput() {\n        const btn = document.getElementById('imposter-guess-btn');\n        const input = document.getElementById('imposter-guess-input');\n        if (!btn || !input) return;\n\n        // Remove existing listeners by cloning button\n        const newBtn = btn.cloneNode(true);\n        btn.parentNode.replaceChild(newBtn, btn);\n\n        newBtn.addEventListener('click', () => {\n            this.submitGuess();\n        });\n\n        // Submit on Enter key\n        input.addEventListener('keydown', (e) => {\n            if (e.key === 'Enter') {\n                this.submitGuess();\n            }\n        });\n    }\n\n    submitGuess() {\n        const input = document.getElementById('imposter-guess-input');\n        if (!input) return;\n\n        const guess = input.value.trim();\n        if (guess === '') return;\n\n        gameSocket.send('word_guess', { guess: guess });\n        input.value = '';\n    }\n\n    handleGuessResult(data) {\n        if (!data.correct) {\n            const feedback = document.getElementById('guess-feedback');\n            if (feedback) {\n                feedback.textContent = 'Incorrect!';\n                feedback.classList.remove('hidden');\n                setTimeout(() => {\n                    feedback.classList.add('hidden');\n                }, 2000);\n            }\n        }\n    }\n\n    handleRoundEnd(data) {\n        this.currentState = 'round_end';\n        this.toggleGuessSection(false);\n        this.showView('imposter-round-end-view');\n\n        const winnerEl = document.getElementById('round-end-winner');\n        const wordEl = document.getElementById('round-end-word');\n        const namesEl = document.getElementById('round-end-imposter-names');\n        const card = document.getElementById('round-end-card');\n        const imposterScoreEl = document.getElementById('round-end-imposter-score');\n        const innocentScoreEl = document.getElementById('round-end-innocent-score');\n\n        if (winnerEl) {\n            winnerEl.textContent = data.winner === 'imposters' ? 'IMPOSTERS WIN!' : 'INNOCENTS WIN!';\n        }\n        if (wordEl) {\n            wordEl.textContent = 'The word was: ' + (data.word || '???');\n        }\n        if (namesEl && data.imposter_names) {\n            namesEl.textContent = data.imposter_names.join(', ');\n        }\n        if (card) {\n            card.className = data.winner === 'imposters'\n                ? 'round-end-card imposters-win'\n                : 'round-end-card innocents-win';\n        }\n        if (imposterScoreEl && data.scores) {\n            imposterScoreEl.textContent = 'Imposters: ' + (data.scores.imposters || 0);\n        }\n        if (innocentScoreEl && data.scores) {\n            innocentScoreEl.textContent = 'Innocents: ' + (data.scores.innocents || 0);\n        }\n    }\n\n    handleRoundRestart(data) {\n        this.currentState = '';\n        this.votes = {};\n        this.tallies = {};\n        this.myVote = null;\n        this.consensusTarget = null;\n        this.countdown = 5;\n        this.isEliminated = false;\n        this.toggleGuessSection(false);\n\n        const input = document.getElementById('imposter-guess-input');\n        if (input) input.value = '';\n        const feedback = document.getElementById('guess-feedback');\n        if (feedback) feedback.classList.add('hidden');\n    }\n\n    showRoleScreen() {\n        const roleLabel = document.getElementById('imposter-role-label');\n        const wordDisplay = document.getElementById('imposter-word');\n        const imposterInfo = document.getElementById('imposter-info');\n        const instructionLabel = document.getElementById('imposter-instruction');\n\n        // Update imposter count info\n        if (imposterInfo) {\n            const plural = this.imposterCount > 1 ? 'imposters' : 'imposter';\n            imposterInfo.textContent = `There ${this.imposterCount > 1 ? 'are' : 'is'} ${this.imposterCount} ${plural} among you`;\n        }\n\n        if (this.isImposter) {\n            // Player IS the imposter\n            if (roleLabel) {\n                roleLabel.textContent = \"You are an IMPOSTER!\";\n                roleLabel.className = 'role-label imposter';\n            }\n            if (wordDisplay) {\n                wordDisplay.textContent = \"IMPOSTER\";\n                wordDisplay.className = 'word-display imposter';\n            }\n            if (instructionLabel) {\n                instructionLabel.textContent = \"Blend in! Figure out the secret word without revealing yourself.\";\n            }\n        } else {\n            // Player is NOT the imposter\n            if (roleLabel) {\n                roleLabel.textContent = \"You are NOT the imposter!\";\n                roleLabel.className = 'role-label innocent';\n            }\n            if (wordDisplay) {\n                wordDisplay.textContent = this.secretWord;\n                wordDisplay.className = 'word-display innocent';\n            }\n            if (instructionLabel) {\n                instructionLabel.textContent = \"Discuss clues about the word to find the imposter!\";\n            }\n        }\n\n        this.showView('imposter-role-view');\n        this.toggleGuessSection(this.isImposter);\n        this.setupGuessInput();\n    }\n\n    updateDiscussionUI() {\n        // Could add additional UI updates when discussion starts\n        // For now, role screen already shows discussion instructions\n    }\n\n    // Voting handlers\n    handleVotingStarted(data) {\n        console.log('Voting started, data:', data);\n        console.log('Players array:', data.players);\n\n        this.currentState = 'voting';\n        this.votes = data.votes || {};\n        this.tallies = data.tallies || {};\n        this.players = data.players || [];\n\n        console.log('this.players after assignment:', this.players);\n\n        if (this.isEliminated) {\n            this.showSpectatorView();\n        } else {\n            this.showVotingView();\n        }\n    }\n\n    showVotingView() {\n        this.showView('imposter-voting-view');\n        this.renderVoteList('vote-player-list', true);\n        this.updateVoteHighlight();\n        this.updateVoteCounts();\n        this.toggleGuessSection(this.isImposter);\n    }\n\n    showSpectatorView() {\n        this.showView('imposter-spectator-view');\n        this.renderVoteList('spectator-vote-list', false);\n        this.updateVoteCounts();\n        this.toggleGuessSection(false);\n    }\n\n    renderVoteList(containerId, interactive) {\n        console.log('renderVoteList called:', containerId, 'interactive:', interactive);\n        console.log('this.players:', this.players);\n\n        const container = document.getElementById(containerId);\n        if (!container) {\n            console.error('Container not found:', containerId);\n            return;\n        }\n\n        container.innerHTML = '';\n\n        this.players.forEach(player => {\n            console.log('Rendering player:', player);\n            // Skip eliminated players in vote list\n            if (player.eliminated) {\n                console.log('Skipping eliminated player:', player.name);\n                return;\n            }\n\n            const div = document.createElement('div');\n            div.className = 'vote-option';\n            div.dataset.playerId = player.id;\n\n            const nameSpan = document.createElement('span');\n            nameSpan.className = 'player-name';\n            nameSpan.textContent = player.name;\n\n            const countSpan = document.createElement('span');\n            countSpan.className = 'vote-count';\n            countSpan.textContent = this.tallies[player.id] || 0;\n\n            div.appendChild(nameSpan);\n            div.appendChild(countSpan);\n\n            if (interactive) {\n                div.addEventListener('click', () => {\n                    this.castVote(player.id);\n                });\n            }\n\n            container.appendChild(div);\n        });\n    }\n\n    castVote(targetId) {\n        this.myVote = targetId;\n        gameSocket.send('vote_cast', { target_id: targetId });\n        this.updateVoteHighlight();\n    }\n\n    updateVoteHighlight() {\n        const container = document.getElementById('vote-player-list');\n        if (!container) return;\n\n        const options = container.querySelectorAll('.vote-option');\n        options.forEach(opt => {\n            if (opt.dataset.playerId === this.myVote) {\n                opt.classList.add('my-vote');\n            } else {\n                opt.classList.remove('my-vote');\n            }\n        });\n    }\n\n    updateVoteCounts() {\n        // Update counts in both voting and spectator views\n        ['vote-player-list', 'spectator-vote-list'].forEach(containerId => {\n            const container = document.getElementById(containerId);\n            if (!container) return;\n\n            const options = container.querySelectorAll('.vote-option');\n            options.forEach(opt => {\n                const playerId = opt.dataset.playerId;\n                const countSpan = opt.querySelector('.vote-count');\n                if (countSpan) {\n                    countSpan.textContent = this.tallies[playerId] || 0;\n                }\n            });\n        });\n    }\n\n    handleVoteUpdate(data) {\n        this.votes = data.votes || {};\n        this.tallies = data.tallies || {};\n        this.updateVoteCounts();\n    }\n\n    // Consensus handlers\n    handleConsensusWarning(data) {\n        this.consensusTarget = data.target_id;\n        this.countdown = data.countdown || 5;\n\n        this.showView('imposter-consensus-view');\n\n        const targetName = this.players.find(p => p.id === this.consensusTarget)?.name || 'Unknown';\n        const targetLabel = document.getElementById('consensus-target-name');\n        if (targetLabel) {\n            targetLabel.textContent = targetName;\n        }\n\n        const countdownEl = document.getElementById('consensus-countdown');\n        if (countdownEl) {\n            countdownEl.textContent = this.countdown;\n        }\n\n        this.toggleGuessSection(this.isImposter && !this.isEliminated);\n    }\n\n    handleConsensusCountdown(data) {\n        this.countdown = data.countdown;\n\n        const countdownEl = document.getElementById('consensus-countdown');\n        if (countdownEl) {\n            countdownEl.textContent = this.countdown;\n        }\n    }\n\n    handleConsensusCancelled() {\n        this.consensusTarget = null;\n        this.countdown = 5;\n\n        // Return to appropriate view\n        if (this.isEliminated) {\n            this.showSpectatorView();\n        } else {\n            this.showVotingView();\n        }\n    }\n\n    // Reveal handlers\n    handleRevealStart(data) {\n        this.showView('imposter-reveal-view');\n        this.toggleGuessSection(false);\n    }\n\n    handleRevealResult(data) {\n        const eliminatedId = data.target_id;\n        const wasImposter = data.is_imposter;\n        const eliminatedName = this.players.find(p => p.id === eliminatedId)?.name || 'Unknown';\n\n        this.showView('imposter-result-view');\n\n        const nameEl = document.getElementById('result-player-name');\n        const outcomeEl = document.getElementById('result-role-text');\n        const resultCard = document.getElementById('result-card');\n\n        if (nameEl) {\n            nameEl.textContent = eliminatedName;\n        }\n\n        if (outcomeEl && resultCard) {\n            if (wasImposter) {\n                outcomeEl.textContent = 'was the IMPOSTER!';\n                outcomeEl.className = 'result-outcome imposter';\n                resultCard.className = 'result-card imposter';\n            } else {\n                outcomeEl.textContent = 'was INNOCENT';\n                outcomeEl.className = 'result-outcome innocent';\n                resultCard.className = 'result-card innocent';\n            }\n        }\n\n        // Mark player as eliminated if it was me\n        if (eliminatedId === this.myPlayerId) {\n            this.isEliminated = true;\n        }\n\n        // Update player list\n        const player = this.players.find(p => p.id === eliminatedId);\n        if (player) {\n            player.eliminated = true;\n        }\n    }\n\n    handleVotingResumed(data) {\n        this.currentState = 'voting';\n        this.votes = data.votes || {};\n        this.tallies = data.tallies || {};\n        this.myVote = null;\n\n        if (this.isEliminated) {\n            this.showSpectatorView();\n        } else {\n            this.showVotingView();\n        }\n    }\n\n    handleWordRevealed(data) {\n        this.secretWord = data.word;\n\n        // Update spectator view to show word\n        const wordEl = document.getElementById('spectator-word-display');\n        if (wordEl) {\n            wordEl.textContent = `The word was: ${this.secretWord}`;\n        }\n    }\n}\n\n// Global instance\nwindow.imposterGame = new ImposterGame();\n",
	"/js/games/quickdraw.js": "/**\n * Quick Draw game handler for web player\n */\nclass QuickDrawGame {\n    constructor() {\n        this.app = null;\n        this.isDrawer = false;\n        this.drawerId = null;\n        this.timeRemaining = 60;\n        this.timerInterval = null;\n\n        // Drawing state\n        this.canvas = null;\n        this.ctx = null;\n        this.isDrawing = false;\n        this.lastX = 0;\n        this.lastY = 0;\n        this.brushColor = '#ffffff';\n        this.brushSize = 5;\n        this.strokes = [];\n        this.currentStroke = null;\n    }\n\n    init(app) {\n        this.app = app;\n        this.setupEventListeners();\n        this.setupSocketHandlers();\n        this.setupCanvas();\n    }\n\n    setupEventListeners() {\n        // Drawing tools\n        document.getElementById('btn-clear')?.addEventListener('click', () => {\n            this.clearCanvas();\n            gameSocket.send({ type: 'quick_draw_clear' });\n        });\n\n        document.getElementById('btn-eraser')?.addEventListener('click', () => {\n            this.brushColor = '#1a1a1a';  // Canvas background color\n            document.getElementById('brush-color').value = '#1a1a1a';\n        });\n\n        document.getElementById('brush-color')?.addEventListener('input', (e) => {\n            this.brushColor = e.target.value;\n        });\n\n        // Guess input\n        document.getElementById('btn-quickdraw-guess')?.addEventListener('click', () => {\n            this.submitGuess();\n        });\n\n        document.getElementById('quickdraw-guess')?.addEventListener('keypress', (e) => {\n            if (e.key === 'Enter') {\n                this.submitGuess();\n            }\n        });\n    }\n\n    setupCanvas() {\n        this.canvas = document.getElementById('drawing-canvas');\n        if (!this.canvas) return;\n\n        this.ctx = this.canvas.getContext('2d');\n        this.ctx.lineCap = 'round';\n        this.ctx.lineJoin = 'round';\n\n        // Clear canvas\n        this.ctx.fillStyle = '#1a1a1a';\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n        // Mouse events\n        this.canvas.addEventListener('mousedown', (e) => this.startDrawing(e));\n        this.canvas.addEventListener('mousemove', (e) => this.draw(e));\n        this.canvas.addEventListener('mouseup', () => this.stopDrawing());\n        this.canvas.addEventListener('mouseout', () => this.stopDrawing());\n\n        // Touch events\n        this.canvas.addEventListener('touchstart', (e) => {\n            e.preventDefault();\n            this.startDrawing(e.touches[0]);\n        });\n        this.canvas.addEventListener('touchmove', (e) => {\n            e.preventDefault();\n            this.draw(e.touches[0]);\n        });\n        this.canvas.addEventListener('touchend', () => this.stopDrawing());\n    }\n\n    setupSocketHandlers() {\n        gameSocket.on('quick_draw_init', (data) => {\n            // Game initialized\n        });\n\n        gameSocket.on('quick_draw_turn', (data) => {\n            this.handleTurn(data);\n        });\n\n        gameSocket.on('quick_draw_stroke', (data) => {\n            if (!this.isDrawer) {\n                this.drawRemoteStroke(data.stroke);\n            }\n        });\n\n        gameSocket.on('quick_draw_clear', () => {\n            if (!this.isDrawer) {\n                this.clearCanvas();\n            }\n        });\n\n        gameSocket.on('quick_draw_wrong', (data) => {\n            this.showWrongGuess(data.name || data.player_name, data.guess);\n        });\n\n        gameSocket.on('quick_draw_result', (data) => {\n            this.handleResult(data);\n        });\n\n        gameSocket.on('quick_draw_timeout', (data) => {\n            this.handleTimeout(data);\n        });\n\n        gameSocket.on('quick_draw_end', (data) => {\n            this.handleGameEnd(data);\n        });\n    }\n\n    handleTurn(data) {\n        this.drawerId = data.drawer_id;\n        this.isDrawer = (data.drawer_id === this.app.playerId);\n        this.timeRemaining = data.time || 60;\n\n        this.clearCanvas();\n        this.clearWrongGuess();\n        this.hideAllViews();\n\n        if (this.isDrawer) {\n            document.getElementById('quickdraw-drawer-view').classList.remove('hidden');\n            document.getElementById('quickdraw-prompt').textContent = data.prompt;\n            this.setupCanvas();\n        } else {\n            document.getElementById('quickdraw-guesser-view').classList.remove('hidden');\n            document.getElementById('quickdraw-drawer-name').textContent =\n                this.app.getPlayerName(data.drawer_id);\n            document.getElementById('quickdraw-guess').value = '';\n            document.getElementById('quickdraw-guess').disabled = false;\n            document.getElementById('btn-quickdraw-guess').disabled = false;\n        }\n\n        this.startTimer();\n    }\n\n    handleResult(data) {\n        this.stopTimer();\n\n        const guesserName = this.app.getPlayerName(data.guesser_id);\n        const drawerName = this.app.getPlayerName(data.drawer_id);\n\n        // Show result overlay or message\n        alert(`${guesserName} guessed \"${data.prompt}\" correctly!\\n\\n${guesserName}: +100 pts\\n${drawerName}: +50 pts`);\n    }\n\n    handleTimeout(data) {\n        this.stopTimer();\n        alert(`Time's up! The word was: ${data.prompt}`);\n    }\n\n    handleGameEnd(data) {\n        this.stopTimer();\n        this.app.showScreen('game-over');\n\n        const winnerDisplay = document.getElementById('winner-display');\n        winnerDisplay.innerHTML = `\n            <h2>Winner</h2>\n            <div class=\"name\">${data.winner_name}</div>\n        `;\n\n        const scoresDisplay = document.getElementById('final-scores');\n        scoresDisplay.innerHTML = '';\n\n        if (data.final_scores) {\n            const sortedScores = Object.entries(data.final_scores)\n                .sort((a, b) => b[1] - a[1]);\n\n            sortedScores.forEach(([playerId, score]) => {\n                const row = document.createElement('div');\n                row.className = 'score-row';\n                row.innerHTML = `\n                    <span>${this.app.getPlayerName(playerId)}</span>\n                    <span>${score}</span>\n                `;\n                scoresDisplay.appendChild(row);\n            });\n        }\n\n        setTimeout(() => {\n            this.app.returnToLobby();\n        }, 5000);\n    }\n\n    // Drawing methods\n    getCanvasCoords(e) {\n        const rect = this.canvas.getBoundingClientRect();\n        const scaleX = this.canvas.width / rect.width;\n        const scaleY = this.canvas.height / rect.height;\n\n        return {\n            x: (e.clientX - rect.left) * scaleX,\n            y: (e.clientY - rect.top) * scaleY\n        };\n    }\n\n    startDrawing(e) {\n        if (!this.isDrawer) return;\n\n        this.isDrawing = true;\n        const coords = this.getCanvasCoords(e);\n        this.lastX = coords.x;\n        this.lastY = coords.y;\n\n        this.currentStroke = {\n            color: this.brushColor,\n            size: this.brushSize,\n            points: [{ x: coords.x, y: coords.y }]\n        };\n    }\n\n    draw(e) {\n        if (!this.isDrawing || !this.isDrawer) return;\n\n        const coords = this.getCanvasCoords(e);\n\n        // Draw locally\n        this.ctx.strokeStyle = this.brushColor;\n        this.ctx.lineWidth = this.brushSize;\n        this.ctx.beginPath();\n        this.ctx.moveTo(this.lastX, this.lastY);\n        this.ctx.lineTo(coords.x, coords.y);\n        this.ctx.stroke();\n\n        this.lastX = coords.x;\n        this.lastY = coords.y;\n\n        // Add to current stroke\n        if (this.currentStroke) {\n            this.currentStroke.points.push({ x: coords.x, y: coords.y });\n        }\n    }\n\n    stopDrawing() {\n        if (!this.isDrawing) return;\n\n        this.isDrawing = false;\n\n        // Send stroke to server\n        if (this.currentStroke && this.currentStroke.points.length > 1) {\n            gameSocket.send({\n                type: 'quick_draw_stroke',\n                stroke: this.currentStroke\n            });\n            this.strokes.push(this.currentStroke);\n        }\n\n        this.currentStroke = null;\n    }\n\n    drawRemoteStroke(stroke) {\n        if (!this.ctx) {\n            // Create a canvas for guesser view if needed\n            const display = document.getElementById('quickdraw-canvas-display');\n            if (display && !display.querySelector('canvas')) {\n                const canvas = document.createElement('canvas');\n                canvas.width = 300;\n                canvas.height = 300;\n                canvas.style.maxWidth = '100%';\n                display.innerHTML = '';\n                display.appendChild(canvas);\n                this.guesserCtx = canvas.getContext('2d');\n                this.guesserCtx.fillStyle = '#1a1a1a';\n                this.guesserCtx.fillRect(0, 0, 300, 300);\n                this.guesserCtx.lineCap = 'round';\n                this.guesserCtx.lineJoin = 'round';\n            }\n        }\n\n        const ctx = this.guesserCtx || this.ctx;\n        if (!ctx || !stroke.points || stroke.points.length < 2) return;\n\n        ctx.strokeStyle = stroke.color;\n        ctx.lineWidth = stroke.size;\n        ctx.beginPath();\n        ctx.moveTo(stroke.points[0].x, stroke.points[0].y);\n\n        for (let i = 1; i < stroke.points.length; i++) {\n            ctx.lineTo(stroke.points[i].x, stroke.points[i].y);\n        }\n\n        ctx.stroke();\n    }\n\n    clearCanvas() {\n        if (this.ctx) {\n            this.ctx.fillStyle = '#1a1a1a';\n            this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n        }\n\n        if (this.guesserCtx) {\n            this.guesserCtx.fillStyle = '#1a1a1a';\n            this.guesserCtx.fillRect(0, 0, 300, 300);\n        }\n\n        this.strokes = [];\n    }\n\n    submitGuess() {\n        if (this.isDrawer) return;\n\n        const input = document.getElementById('quickdraw-guess');\n        const guess = input.value.trim();\n\n        if (guess) {\n            gameSocket.send({\n                type: 'quick_draw_guess',\n                guess: guess\n            });\n            input.value = '';\n        }\n    }\n\n    hideAllViews() {\n        document.getElementById('quickdraw-drawer-view')?.classList.add('hidden');\n        document.getElementById('quickdraw-guesser-view')?.classList.add('hidden');\n    }\n\n    showWrongGuess(playerName, guess) {\n        const wrongGuessEl = document.getElementById('quickdraw-wrong-guess');\n        if (wrongGuessEl) {\n            wrongGuessEl.textContent = `${playerName} guessed: ${guess}`;\n            wrongGuessEl.classList.remove('hidden');\n        }\n    }\n\n    clearWrongGuess() {\n        const wrongGuessEl = document.getElementById('quickdraw-wrong-guess');\n        if (wrongGuessEl) {\n            wrongGuessEl.textContent = '';\n        }\n    }\n\n    startTimer() {\n        this.stopTimer();\n        this.timerInterval = setInterval(() => {\n            this.timeRemaining--;\n            this.updateTimerDisplay();\n\n            if (this.timeRemaining <= 0) {\n                this.stopTimer();\n            }\n        }, 1000);\n    }\n\n    stopTimer() {\n        if (this.timerInterval) {\n            clearInterval(this.timerInterval);\n            this.timerInterval = null;\n        }\n    }\n\n    updateTimerDisplay() {\n        const timer = document.getElementById('quickdraw-timer');\n        if (timer) {\n            timer.textContent = this.timeRemaining;\n            timer.classList.toggle('warning', this.timeRemaining <= 10);\n        }\n    }\n}\n\n// Global instance\nwindow.quickDrawGame = new QuickDrawGame();\n",
	"/js/games/trivia.js": "/**\n * Trivia Showdown game handler for web player\n */\nclass TriviaGame {\n    constructor() {\n        this.app = null;\n        this.timeRemaining = 15;\n        this.timerInterval = null;\n        this.currentPhase = 'waiting';\n        this.hasAnswered = false;\n        this.isReady = false;\n        this.playersReady = {};\n        this.questionStartTime = 0;\n        this.currentQuestion = null;\n    }\n\n    init(app) {\n        this.app = app;\n        this.setupEventListeners();\n        this.setupSocketHandlers();\n    }\n\n    setupEventListeners() {\n        document.getElementById('btn-trivia-ready')?.addEventListener('click', () => {\n            this.submitReady();\n        });\n    }\n\n    setupSocketHandlers() {\n        gameSocket.on('trivia_init', (data) => {\n            this.playersReady = {};\n            (data.player_order || []).forEach(pid => {\n                this.playersReady[pid] = false;\n            });\n        });\n\n        gameSocket.on('trivia_pre_round', (data) => {\n            this.handlePreRound(data);\n        });\n\n        gameSocket.on('trivia_ready_status', (data) => {\n            this.handleReadyStatus(data);\n        });\n\n        gameSocket.on('trivia_question', (data) => {\n            this.handleQuestion(data);\n        });\n\n        gameSocket.on('trivia_answer_count', (data) => {\n            this.handleAnswerCount(data);\n        });\n\n        gameSocket.on('trivia_reveal', (data) => {\n            this.handleReveal(data);\n        });\n\n        gameSocket.on('trivia_leaderboard', (data) => {\n            this.handleLeaderboard(data);\n        });\n\n        gameSocket.on('trivia_round_end', (data) => {\n            this.handleRoundEnd(data);\n        });\n\n        gameSocket.on('trivia_end', (data) => {\n            this.handleGameEnd(data);\n        });\n    }\n\n    handlePreRound(data) {\n        this.currentPhase = 'pre_round';\n        this.isReady = false;\n\n        const readyList = data.ready_players || [];\n        Object.keys(this.playersReady).forEach(pid => {\n            this.playersReady[pid] = readyList.includes(pid);\n        });\n\n        this.hideAllViews();\n        document.getElementById('trivia-ready-view').classList.remove('hidden');\n\n        const nextRound = data.round || 1;\n        const title = nextRound === 1 ? 'Ready to Start?' : `Round ${nextRound}`;\n        document.getElementById('trivia-ready-title').textContent = title;\n        document.getElementById('btn-trivia-ready').textContent = 'Ready!';\n        document.getElementById('btn-trivia-ready').disabled = false;\n        document.getElementById('trivia-ready-status').textContent = `${readyList.length}/${Object.keys(this.playersReady).length} ready`;\n\n        this.updatePlayerReadyIndicators();\n    }\n\n    handleReadyStatus(data) {\n        const readyList = data.ready_players || [];\n        const readyCount = data.ready_count || 0;\n        const needed = data.players_needed || Object.keys(this.playersReady).length;\n\n        Object.keys(this.playersReady).forEach(pid => {\n            this.playersReady[pid] = readyList.includes(pid);\n        });\n\n        document.getElementById('trivia-ready-status').textContent = `${readyCount}/${needed} ready`;\n        this.updatePlayerReadyIndicators();\n    }\n\n    handleQuestion(data) {\n        this.currentPhase = 'question';\n        this.hasAnswered = false;\n        this.timeRemaining = data.time_limit || 15;\n        this.questionStartTime = Date.now();\n        this.currentQuestion = data;\n\n        this.hideAllViews();\n        document.getElementById('trivia-question-view').classList.remove('hidden');\n\n        document.getElementById('trivia-category').textContent = data.category || 'General';\n        document.getElementById('trivia-question-num').textContent = `Question ${data.question_num}/${data.total_questions}`;\n        document.getElementById('trivia-question-text').textContent = data.question;\n\n        this.populateAnswerButtons(data.answers || []);\n        document.getElementById('trivia-answer-status').textContent = '0 answered';\n\n        this.startTimer();\n    }\n\n    populateAnswerButtons(answers) {\n        const container = document.getElementById('trivia-answer-buttons');\n        container.innerHTML = '';\n\n        const labels = ['A', 'B', 'C', 'D'];\n\n        answers.forEach((answer, index) => {\n            const btn = document.createElement('button');\n            btn.className = 'btn-trivia-answer';\n            btn.innerHTML = `<span class=\"answer-label\">${labels[index]}</span><span class=\"answer-text\">${answer}</span>`;\n            btn.addEventListener('click', () => this.submitAnswer(index));\n            container.appendChild(btn);\n        });\n    }\n\n    handleAnswerCount(data) {\n        document.getElementById('trivia-answer-status').textContent =\n            `${data.answered}/${data.total} answered`;\n    }\n\n    handleReveal(data) {\n        this.currentPhase = 'reveal';\n        this.stopTimer();\n\n        this.hideAllViews();\n        document.getElementById('trivia-result-view').classList.remove('hidden');\n\n        const myResult = data.player_results[this.app.playerId] || { answered: -1, correct: false, points: 0 };\n\n        const resultLabel = document.getElementById('trivia-result-label');\n        const pointsLabel = document.getElementById('trivia-points-label');\n\n        if (myResult.answered === -1) {\n            resultLabel.textContent = \"Time's Up!\";\n            resultLabel.className = 'result-timeout';\n            pointsLabel.textContent = '0 points';\n        } else if (myResult.correct) {\n            resultLabel.textContent = 'Correct!';\n            resultLabel.className = 'result-correct';\n            pointsLabel.textContent = `+${myResult.points} points`;\n        } else {\n            resultLabel.textContent = 'Wrong!';\n            resultLabel.className = 'result-wrong';\n            pointsLabel.textContent = '0 points';\n        }\n\n        document.getElementById('trivia-correct-answer').textContent = `Answer: ${data.correct_answer}`;\n    }\n\n    handleLeaderboard(data) {\n        this.currentPhase = 'leaderboard';\n\n        this.hideAllViews();\n        document.getElementById('trivia-leaderboard-view').classList.remove('hidden');\n\n        document.getElementById('trivia-leaderboard-title').textContent =\n            `Question ${data.question_num}/${data.total_questions} Complete`;\n\n        const container = document.getElementById('trivia-leaderboard-list');\n        container.innerHTML = '';\n\n        (data.standings || []).forEach(entry => {\n            const row = document.createElement('div');\n            row.className = 'leaderboard-row';\n\n            let rankClass = '';\n            if (entry.rank === 1) rankClass = 'rank-gold';\n            else if (entry.rank === 2) rankClass = 'rank-silver';\n            else if (entry.rank === 3) rankClass = 'rank-bronze';\n\n            row.innerHTML = `\n                <span class=\"rank ${rankClass}\">#${entry.rank}</span>\n                <span class=\"name\">${entry.name}</span>\n                <span class=\"score\">${entry.score}</span>\n            `;\n            container.appendChild(row);\n        });\n    }\n\n    handleRoundEnd(data) {\n        this.currentPhase = 'round_end';\n        this.stopTimer();\n\n        this.hideAllViews();\n        document.getElementById('trivia-round-end-view').classList.remove('hidden');\n        document.getElementById('trivia-round-complete').textContent = `Round ${data.round} Complete!`;\n        document.getElementById('trivia-round-winner').textContent = `Winner: ${data.round_winner_name}`;\n    }\n\n    handleGameEnd(data) {\n        this.stopTimer();\n        this.app.showScreen('game-over');\n\n        const winnerDisplay = document.getElementById('winner-display');\n        winnerDisplay.innerHTML = `\n            <h2>Winner</h2>\n            <div class=\"name\">${data.winner_name}</div>\n        `;\n\n        const scoresDisplay = document.getElementById('final-scores');\n        scoresDisplay.innerHTML = '';\n\n        const sortedScores = Object.entries(data.final_scores)\n            .sort((a, b) => b[1] - a[1]);\n\n        sortedScores.forEach(([playerId, score]) => {\n            const row = document.createElement('div');\n            row.className = 'score-row';\n            row.innerHTML = `\n                <span>${this.app.getPlayerName(playerId)}</span>\n                <span>${score}</span>\n            `;\n            scoresDisplay.appendChild(row);\n        });\n\n        setTimeout(() => {\n            this.app.returnToLobby();\n        }, 5000);\n    }\n\n    submitAnswer(answerIndex) {\n        if (this.hasAnswered) return;\n\n        this.hasAnswered = true;\n        const timeTaken = (Date.now() - this.questionStartTime) / 1000;\n\n        // Disable all answer buttons and highlight selected\n        const buttons = document.querySelectorAll('.btn-trivia-answer');\n        buttons.forEach((btn, idx) => {\n            btn.disabled = true;\n            if (idx === answerIndex) {\n                btn.classList.add('selected');\n            }\n        });\n\n        gameSocket.send({\n            type: 'trivia_answer',\n            player_id: this.app.playerId,\n            answer_index: answerIndex,\n            time_taken: timeTaken\n        });\n    }\n\n    submitReady() {\n        if (this.isReady) return;\n\n        this.isReady = true;\n        document.getElementById('btn-trivia-ready').disabled = true;\n\n        gameSocket.send({\n            type: 'trivia_ready',\n            player_id: this.app.playerId\n        });\n    }\n\n    updatePlayerReadyIndicators() {\n        const container = document.getElementById('trivia-players-ready');\n        if (!container) return;\n\n        container.innerHTML = '';\n\n        Object.entries(this.app.players).forEach(([playerId, player]) => {\n            const isPlayerReady = this.playersReady[playerId] || false;\n            const div = document.createElement('div');\n            div.className = `player-ready-indicator ${isPlayerReady ? 'ready' : ''}`;\n\n            const color = this.app.getCharacterColor(player.character);\n            div.innerHTML = `\n                <div class=\"player-avatar\" style=\"background-color: ${color}\">\n                    ${isPlayerReady ? '<span class=\"checkmark\"></span>' : ''}\n                </div>\n                <span class=\"player-name\">${player.name}</span>\n            `;\n            container.appendChild(div);\n        });\n    }\n\n    hideAllViews() {\n        document.getElementById('trivia-ready-view')?.classList.add('hidden');\n        document.getElementById('trivia-question-view')?.classList.add('hidden');\n        document.getElementById('trivia-result-view')?.classList.add('hidden');\n        document.getElementById('trivia-leaderboard-view')?.classList.add('hidden');\n        document.getElementById('trivia-round-end-view')?.classList.add('hidden');\n    }\n\n    startTimer() {\n        this.stopTimer();\n        this.updateTimerDisplay();\n\n        this.timerInterval = setInterval(() => {\n            this.timeRemaining--;\n            this.updateTimerDisplay();\n\n            if (this.timeRemaining <= 0) {\n                this.stopTimer();\n            }\n        }, 1000);\n    }\n\n    stopTimer() {\n        if (this.timerInterval) {\n            clearInterval(this.timerInterval);\n            this.timerInterval = null;\n        }\n    }\n\n    updateTimerDisplay() {\n        const timer = document.getElementById('trivia-timer');\n        if (timer) {\n            timer.textContent = this.timeRemaining;\n            timer.classList.toggle('warning', this.timeRemaining <= 5);\n        }\n    }\n}\n\n// Global instance\nwindow.triviaGame = new TriviaGame();\n",
	"/js/games/whosaidit.js": "/**\n * Who Said It game handler for web player\n */\nclass WhoSaidItGame {\n    constructor() {\n        this.app = null;\n        this.timeRemaining = 60;\n        this.timerInterval = null;\n        this.currentPhase = 'waiting';\n        this.hasSubmittedAnswer = false;\n        this.hasVoted = false;\n        this.isReady = false;\n        this.currentAuthorId = null;\n        this.playersReady = {};\n    }\n\n    init(app) {\n        this.app = app;\n        this.setupEventListeners();\n        this.setupSocketHandlers();\n    }\n\n    setupEventListeners() {\n        document.getElementById('btn-submit-answer')?.addEventListener('click', () => {\n            this.submitAnswer();\n        });\n\n        document.getElementById('whosaid-answer')?.addEventListener('keypress', (e) => {\n            if (e.key === 'Enter' && !e.shiftKey) {\n                e.preventDefault();\n                this.submitAnswer();\n            }\n        });\n\n        document.getElementById('btn-ready')?.addEventListener('click', () => {\n            this.submitReady();\n        });\n    }\n\n    setupSocketHandlers() {\n        gameSocket.on('whosaid_init', (data) => {\n            // Initialize ready state for all players\n            this.playersReady = {};\n            (data.player_order || []).forEach(pid => {\n                this.playersReady[pid] = false;\n            });\n        });\n\n        gameSocket.on('whosaid_pre_round', (data) => {\n            this.handlePreRound(data);\n        });\n\n        gameSocket.on('whosaid_ready_status', (data) => {\n            this.handleReadyStatus(data);\n        });\n\n        gameSocket.on('whosaid_prompt', (data) => {\n            this.handlePrompt(data);\n        });\n\n        gameSocket.on('whosaid_answer_received', (data) => {\n            this.handleAnswerReceived(data);\n        });\n\n        gameSocket.on('whosaid_vote_start', (data) => {\n            this.handleVoteStart(data);\n        });\n\n        gameSocket.on('whosaid_vote_received', (data) => {\n            this.handleVoteReceived(data);\n        });\n\n        gameSocket.on('whosaid_reveal', (data) => {\n            this.handleReveal(data);\n        });\n\n        gameSocket.on('whosaid_continue', (data) => {\n            this.handleContinue(data);\n        });\n\n        gameSocket.on('whosaid_round_end', (data) => {\n            this.handleRoundEnd(data);\n        });\n\n        gameSocket.on('whosaid_end', (data) => {\n            this.handleGameEnd(data);\n        });\n    }\n\n    handlePreRound(data) {\n        this.currentPhase = 'pre_round';\n        this.isReady = false;\n\n        // Update ready states\n        const readyList = data.ready_players || [];\n        Object.keys(this.playersReady).forEach(pid => {\n            this.playersReady[pid] = readyList.includes(pid);\n        });\n\n        this.hideAllViews();\n        document.getElementById('whosaid-ready-view').classList.remove('hidden');\n\n        const nextRound = data.round || 1;\n        const title = nextRound === 1 ? 'Ready to Start?' : `Round ${nextRound}`;\n        document.getElementById('whosaid-ready-title').textContent = title;\n        document.getElementById('btn-ready').textContent = 'Ready!';\n        document.getElementById('btn-ready').disabled = false;\n        document.getElementById('whosaid-ready-status').textContent = `${readyList.length}/${Object.keys(this.playersReady).length} ready`;\n\n        this.updatePlayerReadyIndicators();\n    }\n\n    handleReadyStatus(data) {\n        const readyList = data.ready_players || [];\n        const readyCount = data.ready_count || 0;\n        const needed = data.players_needed || Object.keys(this.playersReady).length;\n\n        Object.keys(this.playersReady).forEach(pid => {\n            this.playersReady[pid] = readyList.includes(pid);\n        });\n\n        document.getElementById('whosaid-ready-status').textContent = `${readyCount}/${needed} ready`;\n        this.updatePlayerReadyIndicators();\n    }\n\n    handlePrompt(data) {\n        this.currentPhase = 'writing';\n        this.hasSubmittedAnswer = false;\n        this.timeRemaining = data.time_limit || 60;\n\n        this.hideAllViews();\n        document.getElementById('whosaid-writing-view').classList.remove('hidden');\n\n        document.getElementById('whosaid-prompt').textContent = data.prompt;\n        document.getElementById('whosaid-answer').value = '';\n        document.getElementById('whosaid-answer').disabled = false;\n        document.getElementById('btn-submit-answer').disabled = false;\n        document.getElementById('whosaid-answers-status').textContent = '0 answers received';\n\n        this.startTimer();\n    }\n\n    handleAnswerReceived(data) {\n        document.getElementById('whosaid-answers-status').textContent =\n            `${data.answers_received}/${data.answers_needed} answers received`;\n    }\n\n    handleVoteStart(data) {\n        this.currentPhase = 'voting';\n        this.hasVoted = false;\n        this.currentAuthorId = data.author_id;\n        this.timeRemaining = data.time_limit || 30;\n\n        this.hideAllViews();\n\n        const isAuthor = (data.author_id === this.app.playerId);\n\n        if (isAuthor) {\n            document.getElementById('whosaid-author-view').classList.remove('hidden');\n            document.getElementById('whosaid-your-answer').textContent = `\"${data.answer_text}\"`;\n        } else {\n            document.getElementById('whosaid-voting-view').classList.remove('hidden');\n            document.getElementById('whosaid-answer-display').textContent = `\"${data.answer_text}\"`;\n            this.populateVoteButtons();\n        }\n\n        document.getElementById('whosaid-votes-status').textContent = '0 votes';\n        this.startTimer();\n    }\n\n    populateVoteButtons() {\n        const container = document.getElementById('whosaid-vote-buttons');\n        container.innerHTML = '';\n\n        // Show all players except yourself (you can't vote for yourself)\n        // Players CAN vote for the author - that's the correct answer!\n        Object.entries(this.app.players).forEach(([playerId, player]) => {\n            if (playerId === this.app.playerId) return;\n\n            const btn = document.createElement('button');\n            btn.className = 'btn-vote';\n            btn.textContent = player.name;\n            btn.addEventListener('click', () => this.submitVote(playerId));\n            container.appendChild(btn);\n        });\n    }\n\n    handleVoteReceived(data) {\n        document.getElementById('whosaid-votes-status').textContent =\n            `${data.votes_received}/${data.votes_needed} votes`;\n    }\n\n    handleReveal(data) {\n        this.currentPhase = 'reveal';\n        this.stopTimer();\n\n        this.hideAllViews();\n        document.getElementById('whosaid-reveal-view').classList.remove('hidden');\n\n        document.getElementById('whosaid-reveal-answer').textContent = `\"${data.answer_text}\"`;\n        document.getElementById('whosaid-reveal-author').textContent = `Written by: ${data.author_name}`;\n\n        const resultsContainer = document.getElementById('whosaid-reveal-results');\n        resultsContainer.innerHTML = '';\n\n        // Show correct guessers\n        data.correct_guessers.forEach(playerId => {\n            const playerName = this.app.getPlayerName(playerId);\n            const div = document.createElement('div');\n            div.className = 'result-correct';\n            div.textContent = `${playerName} guessed correctly (+50 pts)`;\n            resultsContainer.appendChild(div);\n        });\n\n        // Show fooled message\n        if (data.fooled_players.length > 0) {\n            const div = document.createElement('div');\n            div.className = 'result-fooled';\n            div.textContent = `${data.author_name} fooled ${data.fooled_players.length} player(s) (+${data.fooled_players.length * 50} pts)`;\n            resultsContainer.appendChild(div);\n        }\n    }\n\n    handleContinue(data) {\n        this.currentPhase = 'continue';\n        this.isReady = false;\n\n        const readyList = data.ready_players || [];\n        Object.keys(this.playersReady).forEach(pid => {\n            this.playersReady[pid] = readyList.includes(pid);\n        });\n\n        this.hideAllViews();\n        document.getElementById('whosaid-ready-view').classList.remove('hidden');\n\n        const isLast = data.is_last_answer || false;\n        const title = isLast ? 'That was the last answer!' : 'Ready for next answer?';\n        const buttonText = isLast ? 'See Results' : 'Next Answer';\n\n        document.getElementById('whosaid-ready-title').textContent = title;\n        document.getElementById('btn-ready').textContent = buttonText;\n        document.getElementById('btn-ready').disabled = false;\n        document.getElementById('whosaid-ready-status').textContent = `${readyList.length}/${Object.keys(this.playersReady).length} ready`;\n\n        this.updatePlayerReadyIndicators();\n    }\n\n    handleRoundEnd(data) {\n        this.currentPhase = 'round_end';\n        this.stopTimer();\n\n        this.hideAllViews();\n        document.getElementById('whosaid-round-end-view').classList.remove('hidden');\n        document.getElementById('whosaid-round-complete').textContent = `Round ${data.round} Complete!`;\n    }\n\n    handleGameEnd(data) {\n        this.stopTimer();\n        this.app.showScreen('game-over');\n\n        const winnerDisplay = document.getElementById('winner-display');\n        winnerDisplay.innerHTML = `\n            <h2>Winner</h2>\n            <div class=\"name\">${data.winner_name}</div>\n        `;\n\n        const scoresDisplay = document.getElementById('final-scores');\n        scoresDisplay.innerHTML = '';\n\n        const sortedScores = Object.entries(data.final_scores)\n            .sort((a, b) => b[1] - a[1]);\n\n        sortedScores.forEach(([playerId, score]) => {\n            const row = document.createElement('div');\n            row.className = 'score-row';\n            row.innerHTML = `\n                <span>${this.app.getPlayerName(playerId)}</span>\n                <span>${score}</span>\n            `;\n            scoresDisplay.appendChild(row);\n        });\n\n        setTimeout(() => {\n            this.app.returnToLobby();\n        }, 5000);\n    }\n\n    submitAnswer() {\n        if (this.hasSubmittedAnswer) return;\n\n        const input = document.getElementById('whosaid-answer');\n        const answer = input.value.trim();\n\n        if (!answer) return;\n\n        this.hasSubmittedAnswer = true;\n        input.disabled = true;\n        document.getElementById('btn-submit-answer').disabled = true;\n\n        gameSocket.send({\n            type: 'whosaid_answer',\n            player_id: this.app.playerId,\n            answer: answer\n        });\n    }\n\n    submitVote(votedForId) {\n        if (this.hasVoted) return;\n\n        this.hasVoted = true;\n\n        // Disable all vote buttons\n        document.querySelectorAll('.btn-vote').forEach(btn => {\n            btn.disabled = true;\n        });\n\n        gameSocket.send({\n            type: 'whosaid_vote',\n            player_id: this.app.playerId,\n            voted_for: votedForId\n        });\n    }\n\n    submitReady() {\n        if (this.isReady) return;\n\n        this.isReady = true;\n        document.getElementById('btn-ready').disabled = true;\n\n        gameSocket.send({\n            type: 'whosaid_ready',\n            player_id: this.app.playerId\n        });\n    }\n\n    updatePlayerReadyIndicators() {\n        // Update player indicators in the ready view\n        const container = document.getElementById('whosaid-players-ready');\n        if (!container) return;\n\n        container.innerHTML = '';\n\n        Object.entries(this.app.players).forEach(([playerId, player]) => {\n            const isPlayerReady = this.playersReady[playerId] || false;\n            const div = document.createElement('div');\n            div.className = `player-ready-indicator ${isPlayerReady ? 'ready' : ''}`;\n\n            const color = this.app.getCharacterColor(player.character);\n            div.innerHTML = `\n                <div class=\"player-avatar\" style=\"background-color: ${color}\">\n                    ${isPlayerReady ? '<span class=\"checkmark\"></span>' : ''}\n                </div>\n                <span class=\"player-name\">${player.name}</span>\n            `;\n            container.appendChild(div);\n        });\n    }\n\n    hideAllViews() {\n        document.getElementById('whosaid-writing-view')?.classList.add('hidden');\n        document.getElementById('whosaid-voting-view')?.classList.add('hidden');\n        document.getElementById('whosaid-author-view')?.classList.add('hidden');\n        document.getElementById('whosaid-reveal-view')?.classList.add('hidden');\n        document.getElementById('whosaid-ready-view')?.classList.add('hidden');\n        document.getElementById('whosaid-round-end-view')?.classList.add('hidden');\n    }\n\n    startTimer() {\n        this.stopTimer();\n        this.updateTimerDisplay();\n\n        this.timerInterval = setInterval(() => {\n            this.timeRemaining--;\n            this.updateTimerDisplay();\n\n            if (this.timeRemaining <= 0) {\n                this.stopTimer();\n            }\n        }, 1000);\n    }\n\n    stopTimer() {\n        if (this.timerInterval) {\n            clearInterval(this.timerInterval);\n            this.timerInterval = null;\n        }\n    }\n\n    updateTimerDisplay() {\n        const timer = document.getElementById('whosaid-timer');\n        if (timer) {\n            timer.textContent = this.timeRemaining;\n            timer.classList.toggle('warning', this.timeRemaining <= 10);\n        }\n    }\n}\n\n// Global instance\nwindow.whoSaidItGame = new WhoSaidItGame();\n",
	"/js/games/wordbomb.js": "/**\n * Word Bomb game handler for web player\n */\nclass WordBombGame {\n    constructor() {\n        this.app = null;\n        this.lives = 3;\n        this.currentLetters = '';\n        this.timeRemaining = 10;\n        this.timerInterval = null;\n        this.isMyTurn = false;\n    }\n\n    init(app) {\n        this.app = app;\n        this.setupEventListeners();\n        this.setupSocketHandlers();\n    }\n\n    setupEventListeners() {\n        document.getElementById('btn-submit-word')?.addEventListener('click', () => {\n            this.submitWord();\n        });\n\n        document.getElementById('wordbomb-input')?.addEventListener('keypress', (e) => {\n            if (e.key === 'Enter') {\n                this.submitWord();\n            }\n        });\n    }\n\n    setupSocketHandlers() {\n        gameSocket.on('word_bomb_init', (data) => {\n            this.handleInit(data);\n        });\n\n        gameSocket.on('word_bomb_turn', (data) => {\n            this.handleTurn(data);\n        });\n\n        gameSocket.on('word_bomb_result', (data) => {\n            this.handleResult(data);\n        });\n\n        gameSocket.on('word_bomb_timeout', (data) => {\n            this.handleTimeout(data);\n        });\n\n        gameSocket.on('word_bomb_eliminated', (data) => {\n            this.handleEliminated(data);\n        });\n\n        gameSocket.on('word_bomb_end', (data) => {\n            this.handleGameEnd(data);\n        });\n    }\n\n    handleInit(data) {\n        this.lives = data.lives || 3;\n        this.updateLivesDisplay();\n    }\n\n    handleTurn(data) {\n        this.currentLetters = data.letters;\n        this.timeRemaining = data.time || 10;\n        this.isMyTurn = (data.player_id === this.app.playerId);\n\n        document.getElementById('wordbomb-letters').textContent = this.currentLetters;\n\n        const input = document.getElementById('wordbomb-input');\n        const btn = document.getElementById('btn-submit-word');\n\n        if (this.isMyTurn) {\n            input.disabled = false;\n            input.value = '';\n            input.focus();\n            btn.disabled = false;\n            this.setFeedback('Your turn! Type a word containing: ' + this.currentLetters, '');\n            this.startTimer();\n        } else {\n            input.disabled = true;\n            btn.disabled = true;\n            this.stopTimer();\n            const playerName = this.app.getPlayerName(data.player_id);\n            this.setFeedback(`${playerName}'s turn...`, '');\n        }\n\n        this.updateTimerDisplay();\n    }\n\n    handleResult(data) {\n        if (data.valid) {\n            this.setFeedback(`\"${data.word}\" is valid!`, 'success');\n        } else {\n            this.setFeedback(`\"${data.word}\" doesn't work!`, 'error');\n        }\n    }\n\n    handleTimeout(data) {\n        this.stopTimer();\n\n        if (data.player_id === this.app.playerId) {\n            this.lives = data.lives_remaining;\n            this.updateLivesDisplay();\n            this.setFeedback('Time\\'s up! You lost a life.', 'error');\n        } else {\n            const playerName = this.app.getPlayerName(data.player_id);\n            this.setFeedback(`${playerName} ran out of time!`, '');\n        }\n    }\n\n    handleEliminated(data) {\n        const playerName = this.app.getPlayerName(data.player_id);\n\n        if (data.player_id === this.app.playerId) {\n            this.setFeedback('You\\'ve been eliminated!', 'error');\n            document.getElementById('wordbomb-input').disabled = true;\n            document.getElementById('btn-submit-word').disabled = true;\n        } else {\n            this.setFeedback(`${playerName} has been eliminated!`, '');\n        }\n    }\n\n    handleGameEnd(data) {\n        this.stopTimer();\n        this.app.showScreen('game-over');\n\n        const winnerDisplay = document.getElementById('winner-display');\n        winnerDisplay.innerHTML = `\n            <h2>Winner</h2>\n            <div class=\"name\">${data.winner_name}</div>\n        `;\n\n        const scoresDisplay = document.getElementById('final-scores');\n        scoresDisplay.innerHTML = '';\n\n        if (data.final_scores) {\n            const sortedScores = Object.entries(data.final_scores)\n                .sort((a, b) => b[1] - a[1]);\n\n            sortedScores.forEach(([playerId, score]) => {\n                const row = document.createElement('div');\n                row.className = 'score-row';\n                row.innerHTML = `\n                    <span>${this.app.getPlayerName(playerId)}</span>\n                    <span>${score}</span>\n                `;\n                scoresDisplay.appendChild(row);\n            });\n        }\n\n        setTimeout(() => {\n            this.app.returnToLobby();\n        }, 5000);\n    }\n\n    submitWord() {\n        if (!this.isMyTurn) return;\n\n        const input = document.getElementById('wordbomb-input');\n        const word = input.value.trim().toLowerCase();\n\n        if (word) {\n            gameSocket.send({\n                type: 'word_bomb_submit',\n                word: word\n            });\n            input.value = '';\n        }\n    }\n\n    updateLivesDisplay() {\n        const livesContainer = document.getElementById('wordbomb-lives');\n        if (!livesContainer) return;\n\n        livesContainer.innerHTML = '';\n        for (let i = 0; i < 3; i++) {\n            const life = document.createElement('span');\n            life.className = 'life';\n            life.textContent = '';\n            if (i >= this.lives) {\n                life.classList.add('lost');\n            }\n            livesContainer.appendChild(life);\n        }\n    }\n\n    setFeedback(message, type) {\n        const feedback = document.getElementById('wordbomb-feedback');\n        if (feedback) {\n            feedback.textContent = message;\n            feedback.className = 'feedback';\n            if (type) {\n                feedback.classList.add(type);\n            }\n        }\n    }\n\n    startTimer() {\n        this.stopTimer();\n        this.timerInterval = setInterval(() => {\n            this.timeRemaining--;\n            this.updateTimerDisplay();\n\n            if (this.timeRemaining <= 0) {\n                this.stopTimer();\n            }\n        }, 1000);\n    }\n\n    stopTimer() {\n        if (this.timerInterval) {\n            clearInterval(this.timerInterval);\n            this.timerInterval = null;\n        }\n    }\n\n    updateTimerDisplay() {\n        const timer = document.getElementById('wordbomb-timer');\n        if (timer) {\n            timer.textContent = this.timeRemaining;\n            timer.classList.toggle('warning', this.timeRemaining <= 3);\n        }\n    }\n}\n\n// Global instance\nwindow.wordBombGame = new WordBombGame();\n",
	"/js/websocket.js": "/**\n * WebSocket connection manager for Party Games web player\n */\nclass GameSocket {\n    constructor() {\n        this.socket = null;\n        this.isConnected = false;\n        this.reconnectAttempts = 0;\n        this.maxReconnectAttempts = 3;\n        this.messageHandlers = new Map();\n\n        // Connection info from URL params or manual entry\n        this.hostIP = null;\n        this.hostPort = 8080;\n    }\n\n    /**\n     * Parse connection info from URL parameters\n     * Expected format: ?host=192.168.1.5&port=8080\n     */\n    parseURLParams() {\n        const params = new URLSearchParams(window.location.search);\n        this.hostIP = params.get('host');\n        this.hostPort = parseInt(params.get('port')) || 8080;\n        return this.hostIP !== null;\n    }\n\n    /**\n     * Connect to the game host\n     */\n    connect(host = null, port = null) {\n        if (host) this.hostIP = host;\n        if (port) this.hostPort = port;\n\n        if (!this.hostIP) {\n            console.error('No host IP specified');\n            this.emit('error', { message: 'No host IP specified' });\n            return;\n        }\n\n        const url = `ws://${this.hostIP}:${this.hostPort}`;\n        console.log('Connecting to:', url);\n\n        try {\n            this.socket = new WebSocket(url);\n            this.setupSocketHandlers();\n        } catch (e) {\n            console.error('WebSocket creation failed:', e);\n            this.emit('error', { message: 'Failed to create connection' });\n        }\n    }\n\n    /**\n     * Set up WebSocket event handlers\n     */\n    setupSocketHandlers() {\n        this.socket.onopen = () => {\n            console.log('WebSocket connected');\n            this.isConnected = true;\n            this.reconnectAttempts = 0;\n            this.emit('connected');\n        };\n\n        this.socket.onclose = (event) => {\n            console.log('WebSocket closed:', event.code, event.reason);\n            this.isConnected = false;\n\n            if (this.reconnectAttempts < this.maxReconnectAttempts) {\n                this.reconnectAttempts++;\n                console.log(`Reconnect attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts}`);\n                setTimeout(() => this.connect(), 2000);\n            } else {\n                this.emit('disconnected');\n            }\n        };\n\n        this.socket.onerror = (error) => {\n            console.error('WebSocket error:', error);\n            this.emit('error', { message: 'Connection error' });\n        };\n\n        this.socket.onmessage = (event) => {\n            try {\n                const data = JSON.parse(event.data);\n                this.handleMessage(data);\n            } catch (e) {\n                console.error('Failed to parse message:', e);\n            }\n        };\n    }\n\n    /**\n     * Handle incoming messages and route to appropriate handlers\n     */\n    handleMessage(data) {\n        const type = data.type;\n        console.log('Received:', type, data);\n\n        // Emit to specific type handlers\n        this.emit(type, data);\n\n        // Also emit to generic 'message' handlers\n        this.emit('message', data);\n    }\n\n    /**\n     * Send a message to the host\n     */\n    send(data) {\n        if (!this.isConnected || !this.socket) {\n            console.error('Cannot send: not connected');\n            return false;\n        }\n\n        try {\n            this.socket.send(JSON.stringify(data));\n            console.log('Sent:', data.type, data);\n            return true;\n        } catch (e) {\n            console.error('Send failed:', e);\n            return false;\n        }\n    }\n\n    /**\n     * Send a join request to the host\n     */\n    requestJoin(playerName, characterId) {\n        return this.send({\n            type: 'join_request',\n            name: playerName,\n            character: characterId\n        });\n    }\n\n    /**\n     * Register a message handler\n     */\n    on(type, handler) {\n        if (!this.messageHandlers.has(type)) {\n            this.messageHandlers.set(type, []);\n        }\n        this.messageHandlers.get(type).push(handler);\n    }\n\n    /**\n     * Remove a message handler\n     */\n    off(type, handler) {\n        if (this.messageHandlers.has(type)) {\n            const handlers = this.messageHandlers.get(type);\n            const index = handlers.indexOf(handler);\n            if (index !== -1) {\n                handlers.splice(index, 1);\n            }\n        }\n    }\n\n    /**\n     * Emit an event to all registered handlers\n     */\n    emit(type, data = {}) {\n        if (this.messageHandlers.has(type)) {\n            this.messageHandlers.get(type).forEach(handler => {\n                try {\n                    handler(data);\n                } catch (e) {\n                    console.error(`Handler error for ${type}:`, e);\n                }\n            });\n        }\n    }\n\n    /**\n     * Close the connection\n     */\n    disconnect() {\n        if (this.socket) {\n            this.socket.close();\n            this.socket = null;\n        }\n        this.isConnected = false;\n    }\n}\n\n// Global instance\nconst gameSocket = new GameSocket();\n",
}
