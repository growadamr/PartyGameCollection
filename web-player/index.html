<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Party Games</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="app">
        <!-- Connection Screen -->
        <div id="screen-connect" class="screen active">
            <h1>Party Games</h1>
            <div class="card">
                <p class="status" id="connection-status">Connecting to host...</p>
                <div id="manual-connect" class="hidden">
                    <input type="text" id="host-ip" placeholder="Host IP (e.g., 192.168.1.5)">
                    <input type="number" id="host-port" placeholder="Port" value="8080">
                    <button id="btn-connect" class="btn-primary">Connect</button>
                </div>
            </div>
        </div>

        <!-- Join Screen -->
        <div id="screen-join" class="screen">
            <h1>Join Game</h1>
            <div class="card">
                <input type="text" id="player-name" placeholder="Your Name" maxlength="12">
                <div id="character-grid" class="character-grid">
                    <!-- Characters populated by JS -->
                </div>
                <button id="btn-join" class="btn-primary" disabled>Join</button>
            </div>
        </div>

        <!-- Waiting Screen -->
        <div id="screen-waiting" class="screen">
            <h1>Waiting for Host</h1>
            <div class="card">
                <p class="player-name" id="display-name"></p>
                <div class="character-preview" id="display-character"></div>
                <p class="status">Waiting for the game to start...</p>
                <div id="players-list" class="players-list"></div>
            </div>
        </div>

        <!-- Game: Charades -->
        <div id="screen-charades" class="screen">
            <div class="game-header">
                <span class="game-title">Charades</span>
                <span class="timer" id="charades-timer">60</span>
            </div>

            <div id="charades-actor-view" class="game-content hidden">
                <p class="role-label">You're Acting!</p>
                <div class="prompt-card" id="charades-prompt">???</div>
                <button id="btn-start-turn" class="btn-primary">Start My Turn</button>
                <button id="btn-skip" class="btn-secondary hidden">Skip</button>
            </div>

            <div id="charades-guesser-view" class="game-content hidden">
                <p class="role-label">Guess what <span id="charades-actor-name">???</span> is acting!</p>
                <div class="prompt-card">???</div>
                <input type="text" id="charades-guess" placeholder="Type your guess...">
                <button id="btn-guess" class="btn-primary">Guess</button>
            </div>

            <div id="charades-result-view" class="game-content hidden">
                <div class="result-card" id="charades-result"></div>
            </div>
        </div>

        <!-- Game: Word Bomb -->
        <div id="screen-word-bomb" class="screen">
            <div class="game-header">
                <span class="game-title">Word Bomb</span>
                <span class="timer" id="wordbomb-timer">10</span>
            </div>

            <div class="game-content">
                <div class="lives" id="wordbomb-lives"></div>
                <div class="prompt-card large" id="wordbomb-letters">PH</div>
                <input type="text" id="wordbomb-input" placeholder="Type a word..." autocomplete="off">
                <button id="btn-submit-word" class="btn-primary">Submit</button>
                <p class="feedback" id="wordbomb-feedback"></p>
            </div>
        </div>

        <!-- Game: Quick Draw -->
        <div id="screen-quick-draw" class="screen">
            <div class="game-header">
                <span class="game-title">Quick Draw</span>
                <span class="timer" id="quickdraw-timer">60</span>
            </div>

            <div id="quickdraw-drawer-view" class="game-content hidden">
                <p class="role-label">Draw this:</p>
                <div class="prompt-card" id="quickdraw-prompt">???</div>
                <canvas id="drawing-canvas" width="300" height="300"></canvas>
                <div class="drawing-tools">
                    <button id="btn-eraser" class="btn-secondary">Eraser</button>
                    <button id="btn-clear" class="btn-secondary">Clear</button>
                    <input type="color" id="brush-color" value="#ffffff">
                </div>
            </div>

            <div id="quickdraw-guesser-view" class="game-content hidden">
                <p class="role-label">Guess what <span id="quickdraw-drawer-name">???</span> is drawing!</p>
                <div class="drawing-display" id="quickdraw-canvas-display"></div>
                <p id="quickdraw-wrong-guess" class="wrong-guess"></p>
                <input type="text" id="quickdraw-guess" placeholder="Type your guess...">
                <button id="btn-quickdraw-guess" class="btn-primary">Guess</button>
            </div>
        </div>

        <!-- Game: Imposter -->
        <div id="screen-imposter" class="screen">
            <div class="game-header">
                <span class="game-title">Imposter</span>
                <span class="imposter-count" id="imposter-count-display">? imposters</span>
            </div>

            <!-- Role/Discussion View (existing, now wrapped) -->
            <div id="imposter-role-view" class="game-content">
                <p class="role-label" id="imposter-role-label">Your Role</p>
                <div class="prompt-card large" id="imposter-word">???</div>
                <p class="info-text" id="imposter-info">? imposters among you</p>
                <p class="instruction" id="imposter-instruction">Waiting for game to start...</p>
            </div>

            <!-- Voting View -->
            <div id="imposter-voting-view" class="game-content hidden">
                <p class="vote-instruction">Tap a player to vote</p>
                <div id="vote-player-list" class="vote-list">
                    <!-- Dynamically populated with vote-option divs -->
                </div>
            </div>

            <!-- Spectator View (eliminated players) -->
            <div id="imposter-spectator-view" class="game-content hidden">
                <p class="spectator-label">You've been eliminated</p>
                <p class="spectator-word" id="spectator-word-display"></p>
                <p class="spectator-instruction">Watch the votes unfold...</p>
                <div id="spectator-vote-list" class="vote-list spectator">
                    <!-- Dynamically populated, non-interactive -->
                </div>
            </div>

            <!-- Consensus Warning View -->
            <div id="imposter-consensus-view" class="game-content hidden">
                <div class="consensus-warning">
                    <p class="consensus-text">Consensus on</p>
                    <p class="consensus-name" id="consensus-target-name">???</p>
                    <div class="countdown-number" id="consensus-countdown">5</div>
                    <p class="consensus-subtext">Vote changes can stop this!</p>
                </div>
            </div>

            <!-- Revealing View -->
            <div id="imposter-reveal-view" class="game-content hidden">
                <div class="reveal-card">
                    <p class="reveal-text">Revealing...</p>
                    <p class="reveal-name" id="reveal-target-name">???</p>
                </div>
            </div>

            <!-- Result View -->
            <div id="imposter-result-view" class="game-content hidden">
                <div class="result-card" id="result-card">
                    <h2 class="result-name" id="result-player-name">Alex</h2>
                    <p class="result-role" id="result-role-text">was an IMPOSTER!</p>
                    <p class="result-remaining" id="result-remaining">1 imposter remaining</p>
                </div>
            </div>

            <!-- Guess input (imposters only, toggled by JS independently of views) -->
            <div id="imposter-guess-section" class="guess-section hidden">
                <p class="guess-label">Guess the word:</p>
                <div class="guess-input-row">
                    <input type="text" id="imposter-guess-input" class="guess-input" placeholder="Enter your guess..." autocomplete="off" />
                    <button id="imposter-guess-btn" class="btn-guess">Guess</button>
                </div>
                <p id="guess-feedback" class="guess-feedback hidden"></p>
            </div>

            <!-- Round End View -->
            <div id="imposter-round-end-view" class="game-content hidden">
                <div id="round-end-card" class="round-end-card">
                    <h2 id="round-end-winner" class="round-end-winner">IMPOSTERS WIN!</h2>
                    <p id="round-end-word" class="round-end-word">The word was: ???</p>
                    <div id="round-end-imposters" class="round-end-imposters">
                        <p class="imposters-label">The imposters were:</p>
                        <p id="round-end-imposter-names" class="imposter-names">???</p>
                    </div>
                    <div class="round-end-scores">
                        <span id="round-end-imposter-score" class="team-score imposter-score">Imposters: 0</span>
                        <span class="score-divider">|</span>
                        <span id="round-end-innocent-score" class="team-score innocent-score">Innocents: 0</span>
                    </div>
                </div>
        <!-- Game: Who Said It -->
        <div id="screen-who-said-it" class="screen">
            <div class="game-header">
                <span class="game-title">Who Said It?</span>
                <span class="timer" id="whosaid-timer">60</span>
            </div>

            <div id="whosaid-writing-view" class="game-content hidden">
                <div class="prompt-card" id="whosaid-prompt">???</div>
                <p class="role-label">Type your answer (keep it secret!):</p>
                <textarea id="whosaid-answer" placeholder="Your answer..." rows="3"></textarea>
                <button id="btn-submit-answer" class="btn-primary">Submit Answer</button>
                <p class="status" id="whosaid-answers-status">0 answers received</p>
            </div>

            <div id="whosaid-voting-view" class="game-content hidden">
                <p class="role-label">Who wrote this?</p>
                <div class="prompt-card" id="whosaid-answer-display">"..."</div>
                <div class="vote-buttons" id="whosaid-vote-buttons"></div>
                <p class="status" id="whosaid-votes-status">0 votes</p>
            </div>

            <div id="whosaid-author-view" class="game-content hidden">
                <p class="role-label">This is YOUR answer!</p>
                <div class="prompt-card" id="whosaid-your-answer">"..."</div>
                <p class="status">Wait and see who guesses correctly...</p>
            </div>

            <div id="whosaid-reveal-view" class="game-content hidden">
                <div class="prompt-card" id="whosaid-reveal-answer">"..."</div>
                <p class="reveal-author" id="whosaid-reveal-author">Written by: ???</p>
                <div class="reveal-results" id="whosaid-reveal-results"></div>
            </div>

            <div id="whosaid-ready-view" class="game-content hidden">
                <h2 id="whosaid-ready-title">Ready to Start?</h2>
                <div class="players-ready-grid" id="whosaid-players-ready"></div>
                <button id="btn-ready" class="btn-primary btn-large">Ready!</button>
                <p class="status" id="whosaid-ready-status">0/4 ready</p>
            </div>

            <div id="whosaid-round-end-view" class="game-content hidden">
                <h2 id="whosaid-round-complete">Round Complete!</h2>
                <p class="status">Next round starting soon...</p>
            </div>
        </div>

<!-- Game: Fibbage -->
        <div id="screen-fibbage" class="screen">
            <div class="game-header">
                <span class="game-title">Fibbage</span>
                <span class="timer" id="fibbage-timer">60</span>
            </div>

            <div id="fibbage-writing-view" class="game-content hidden">
                <div class="prompt-card" id="fibbage-question">???</div>
                <p class="role-label">Write a believable LIE to fill in the blank:</p>
                <textarea id="fibbage-answer" placeholder="Your lie..." rows="2"></textarea>
                <button id="btn-submit-lie" class="btn-primary">Submit Lie</button>
                <p class="status" id="fibbage-answers-status">0 lies submitted</p>
            </div>

            <div id="fibbage-voting-view" class="game-content hidden">
                <div class="prompt-card" id="fibbage-vote-question">???</div>
                <p class="role-label">Which answer is the TRUTH?</p>
                <div class="vote-buttons-vertical" id="fibbage-vote-buttons"></div>
                <p class="status" id="fibbage-votes-status">0 votes</p>
            </div>

            <div id="fibbage-reveal-view" class="game-content hidden">
                <div class="prompt-card reveal-truth" id="fibbage-reveal-answer">The truth: "..."</div>
                <div class="reveal-results" id="fibbage-reveal-results"></div>
            </div>

            <div id="fibbage-ready-view" class="game-content hidden">
                <h2 id="fibbage-ready-title">Ready to Lie?</h2>
                <div class="players-ready-grid" id="fibbage-players-ready"></div>
                <button id="btn-fibbage-ready" class="btn-primary btn-large">Ready!</button>
                <p class="status" id="fibbage-ready-status">0/4 ready</p>
            </div>

            <div id="fibbage-round-end-view" class="game-content hidden">
                <h2 id="fibbage-round-complete">Round Complete!</h2>
                <p class="status">Next round starting soon...</p>
            </div>
        </div>

        <!-- Game: Trivia Showdown -->
        <div id="screen-trivia" class="screen">
            <div class="game-header">
                <span class="game-title">Trivia Showdown</span>
                <span class="timer" id="trivia-timer">15</span>
            </div>

            <div id="trivia-ready-view" class="game-content hidden">
                <h2 id="trivia-ready-title">Ready to Start?</h2>
                <div class="players-ready-grid" id="trivia-players-ready"></div>
                <button id="btn-trivia-ready" class="btn-primary btn-large">Ready!</button>
                <p class="status" id="trivia-ready-status">0/4 ready</p>
            </div>

            <div id="trivia-question-view" class="game-content hidden">
                <div class="trivia-question-header">
                    <span class="category" id="trivia-category">Science</span>
                    <span class="question-num" id="trivia-question-num">Question 1/10</span>
                </div>
                <div class="prompt-card" id="trivia-question-text">???</div>
                <div class="trivia-answers" id="trivia-answer-buttons"></div>
                <p class="status" id="trivia-answer-status">0 answered</p>
            </div>

            <div id="trivia-result-view" class="game-content hidden">
                <h2 id="trivia-result-label" class="result-correct">Correct!</h2>
                <p class="points-earned" id="trivia-points-label">+150 points</p>
                <p class="correct-answer" id="trivia-correct-answer">Answer: Au</p>
            </div>

            <div id="trivia-leaderboard-view" class="game-content hidden">
                <h2 id="trivia-leaderboard-title">Leaderboard</h2>
                <div class="leaderboard-list" id="trivia-leaderboard-list"></div>
            </div>

            <div id="trivia-round-end-view" class="game-content hidden">
                <h2 id="trivia-round-complete">Round Complete!</h2>
                <p class="round-winner" id="trivia-round-winner">Winner: ???</p>
                <p class="status">Next round starting soon...</p>
            </div>
        </div>

        <!-- Game Over Screen -->
        <div id="screen-game-over" class="screen">
            <h1>Game Over!</h1>
            <div class="card">
                <div class="winner" id="winner-display"></div>
                <div class="final-scores" id="final-scores"></div>
                <p class="status">Returning to lobby...</p>
            </div>
        </div>

        <!-- Disconnected Screen -->
        <div id="screen-disconnected" class="screen">
            <h1>Disconnected</h1>
            <div class="card">
                <p class="status">Lost connection to host</p>
                <button id="btn-reconnect" class="btn-primary">Try Again</button>
            </div>
        </div>
    </div>

    <script src="js/websocket.js"></script>
    <script src="js/games/charades.js"></script>
    <script src="js/games/wordbomb.js"></script>
    <script src="js/games/quickdraw.js"></script>
    <script src="js/games/imposter.js"></script>
    <script src="js/games/whosaidit.js"></script>
    <script src="js/games/fibbage.js"></script>
    <script src="js/games/trivia.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
