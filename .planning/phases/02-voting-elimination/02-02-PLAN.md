---
phase: 02-voting-elimination
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - web-player/index.html
  - web-player/css/style.css
autonomous: true

must_haves:
  truths:
    - "Voting view shows list of players with vote counts"
    - "Own vote is visually highlighted"
    - "Eliminated players are grayed out and not tappable"
    - "Consensus warning shows pulsing red with large countdown"
    - "Reveal shows dramatic pause then colored result"
    - "Spectator view shows votes without interaction"
  artifacts:
    - path: "web-player/index.html"
      provides: "Voting UI structure with all required views"
      contains: "imposter-voting-view"
    - path: "web-player/css/style.css"
      provides: "Voting-specific styles including consensus animation"
      contains: "pulse-red"
  key_links:
    - from: "web-player/index.html"
      to: "imposter.js"
      via: "DOM element IDs"
      pattern: "id=\"vote-player-list\""
---

<objective>
Add voting UI structure to the web player for the Imposter game.

Purpose: Create the HTML structure and CSS styles needed for voting, consensus warning, reveal, and result display views that the JavaScript handlers will control.

Output: Updated index.html with voting UI sections inside #screen-imposter, and style.css with voting-specific styles.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-voting-elimination/02-RESEARCH.md
@.planning/phases/02-voting-elimination/02-CONTEXT.md

@web-player/index.html
@web-player/css/style.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add voting UI structure to index.html</name>
  <files>web-player/index.html</files>
  <action>
Replace the current #screen-imposter content (the game-content div with role screen) with multiple view sections. The existing role/discussion view becomes one of several views.

Replace lines 117-129 (the current #screen-imposter section) with:

```html
<!-- Game: Imposter -->
<div id="screen-imposter" class="screen">
    <div class="game-header">
        <span class="game-title">Imposter</span>
        <span class="imposter-count" id="imposter-count-display">? imposters</span>
    </div>

    <!-- Role/Discussion View (existing, now wrapped) -->
    <div id="imposter-role-view" class="game-content">
        <p class="role-label" id="imposter-role-label">Your Role</p>
        <div class="prompt-card large" id="imposter-word">???</div>
        <p class="info-text" id="imposter-info">? imposters among you</p>
        <p class="instruction" id="imposter-instruction">Waiting for game to start...</p>
    </div>

    <!-- Voting View -->
    <div id="imposter-voting-view" class="game-content hidden">
        <p class="vote-instruction">Tap a player to vote</p>
        <div id="vote-player-list" class="vote-list">
            <!-- Dynamically populated with vote-option divs -->
        </div>
    </div>

    <!-- Spectator View (eliminated players) -->
    <div id="imposter-spectator-view" class="game-content hidden">
        <p class="spectator-label">You've been eliminated</p>
        <p class="spectator-word" id="spectator-word-display"></p>
        <p class="spectator-instruction">Watch the votes unfold...</p>
        <div id="spectator-vote-list" class="vote-list spectator">
            <!-- Dynamically populated, non-interactive -->
        </div>
    </div>

    <!-- Consensus Warning View -->
    <div id="imposter-consensus-view" class="game-content hidden">
        <div class="consensus-warning">
            <p class="consensus-text">Consensus on</p>
            <p class="consensus-name" id="consensus-target-name">???</p>
            <div class="countdown-number" id="consensus-countdown">5</div>
            <p class="consensus-subtext">Vote changes can stop this!</p>
        </div>
    </div>

    <!-- Revealing View -->
    <div id="imposter-reveal-view" class="game-content hidden">
        <div class="reveal-card">
            <p class="reveal-text">Revealing...</p>
            <p class="reveal-name" id="reveal-target-name">???</p>
        </div>
    </div>

    <!-- Result View -->
    <div id="imposter-result-view" class="game-content hidden">
        <div class="result-card" id="result-card">
            <h2 class="result-name" id="result-player-name">Alex</h2>
            <p class="result-role" id="result-role-text">was an IMPOSTER!</p>
            <p class="result-remaining" id="result-remaining">1 imposter remaining</p>
        </div>
    </div>
</div>
```

This preserves the existing role view (now with id="imposter-role-view") while adding the new voting-related views.
  </action>
  <verify>Open index.html in browser, inspect #screen-imposter to verify all view divs exist with correct IDs.</verify>
  <done>index.html contains imposter-role-view, imposter-voting-view, imposter-spectator-view, imposter-consensus-view, imposter-reveal-view, and imposter-result-view.</done>
</task>

<task type="auto">
  <name>Task 2: Add voting CSS styles</name>
  <files>web-player/css/style.css</files>
  <action>
Add the following CSS at the end of style.css (before the final closing brace if any, or at the very end):

```css
/* ============ IMPOSTER VOTING STYLES ============ */

/* Imposter count in header */
.imposter-count {
    color: var(--accent-secondary);
    font-size: 0.9rem;
}

/* Vote instruction */
.vote-instruction {
    color: var(--text-secondary);
    text-align: center;
    margin-bottom: 8px;
}

/* Voting list container */
.vote-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
    width: 100%;
}

/* Individual vote option */
.vote-option {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px;
    background: var(--bg-card);
    border-radius: var(--border-radius);
    border: 3px solid transparent;
    cursor: pointer;
    transition: border-color 0.2s, opacity 0.2s;
}

.vote-option:active {
    transform: scale(0.98);
}

.vote-option.my-vote {
    border-color: var(--accent-primary);
}

.vote-option.eliminated {
    opacity: 0.4;
    text-decoration: line-through;
    cursor: not-allowed;
    pointer-events: none;
}

.vote-option .player-name {
    font-size: 1.1rem;
    font-weight: 500;
}

.vote-option .vote-count {
    background: var(--accent-secondary);
    color: white;
    padding: 4px 12px;
    border-radius: 12px;
    font-weight: bold;
    font-size: 0.9rem;
    min-width: 24px;
    text-align: center;
}

.vote-option .vote-count.zero {
    background: var(--bg-secondary);
    color: var(--text-secondary);
}

/* Spectator styles */
.spectator-label {
    color: var(--text-secondary);
    font-size: 1.2rem;
    text-align: center;
}

.spectator-word {
    font-size: 1.5rem;
    color: var(--accent-success);
    text-align: center;
    margin: 8px 0;
}

.spectator-instruction {
    color: var(--text-secondary);
    font-size: 0.9rem;
    text-align: center;
    margin-bottom: 16px;
}

.vote-list.spectator .vote-option {
    cursor: default;
    pointer-events: none;
}

/* Consensus warning */
.consensus-warning {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 32px;
    border-radius: var(--border-radius);
    animation: pulse-red 0.5s infinite;
    width: 100%;
}

@keyframes pulse-red {
    0%, 100% { background-color: rgba(255, 59, 59, 0.15); }
    50% { background-color: rgba(255, 59, 59, 0.35); }
}

.consensus-text {
    font-size: 1.2rem;
    color: var(--text-secondary);
    margin-bottom: 4px;
}

.consensus-name {
    font-size: 2rem;
    font-weight: bold;
    color: var(--accent-secondary);
    margin-bottom: 16px;
}

.countdown-number {
    font-size: 6rem;
    font-weight: bold;
    color: var(--accent-secondary);
    line-height: 1;
}

.consensus-subtext {
    font-size: 0.9rem;
    color: var(--text-secondary);
    margin-top: 16px;
}

/* Reveal view */
.reveal-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 48px 32px;
    background: var(--bg-card);
    border-radius: var(--border-radius);
    width: 100%;
    animation: reveal-pulse 1s infinite;
}

@keyframes reveal-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

.reveal-text {
    font-size: 1.5rem;
    color: var(--text-secondary);
    margin-bottom: 8px;
}

.reveal-name {
    font-size: 2.5rem;
    font-weight: bold;
    color: var(--text-primary);
}

/* Result view */
#imposter-result-view .result-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 48px 32px;
    border-radius: var(--border-radius);
    width: 100%;
    text-align: center;
}

#imposter-result-view .result-card.imposter {
    background: linear-gradient(135deg, #ff4444 0%, #cc0000 100%);
}

#imposter-result-view .result-card.innocent {
    background: linear-gradient(135deg, #44cc44 0%, #009900 100%);
}

.result-name {
    font-size: 2rem;
    font-weight: bold;
    color: white;
    margin-bottom: 8px;
}

.result-role {
    font-size: 1.5rem;
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: 16px;
}

.result-remaining {
    font-size: 1rem;
    color: rgba(255, 255, 255, 0.7);
}

/* Info text styling for imposter game */
.info-text {
    color: var(--text-secondary);
    text-align: center;
    font-size: 0.95rem;
}

/* Word display variants */
.word-display.imposter {
    color: var(--accent-secondary) !important;
}

.word-display.innocent {
    color: var(--accent-success) !important;
}

/* Role label variants */
.role-label.imposter {
    color: var(--accent-secondary);
}

.role-label.innocent {
    color: var(--accent-success);
}
```

This adds all the styles needed for:
- Vote list with tappable options
- Own vote highlight (border)
- Eliminated player styling (grayed, line-through)
- Consensus warning with pulsing red animation
- Large countdown number
- Reveal "Revealing..." animation
- Result cards with imposter (red gradient) and innocent (green gradient) variants
  </action>
  <verify>
Open web player in browser, use DevTools to temporarily add classes to elements:
1. Add `my-vote` to a vote-option to see border
2. Add `eliminated` to see gray/line-through
3. Show consensus-view to see pulsing animation
4. Add `imposter` or `innocent` class to result-card to see gradients
  </verify>
  <done>style.css contains all voting styles: vote-list, vote-option, my-vote, eliminated, consensus-warning, pulse-red animation, countdown-number, reveal-card, result-card with imposter/innocent variants.</done>
</task>

</tasks>

<verification>
1. Open index.html directly in browser
2. Inspect #screen-imposter - should contain 6 view divs
3. Check that all required element IDs exist for JS to reference:
   - vote-player-list
   - spectator-vote-list
   - spectator-word-display
   - consensus-target-name
   - consensus-countdown
   - reveal-target-name
   - result-card
   - result-player-name
   - result-role-text
   - result-remaining
4. Manually test CSS by adding/removing classes in DevTools
</verification>

<success_criteria>
- HTML contains all 6 view sections with unique IDs
- Only imposter-role-view is visible by default (others have hidden class)
- CSS provides visual differentiation for my-vote and eliminated states
- Consensus warning has pulsing red animation
- Result card has distinct imposter (red) and innocent (green) gradients
- All styles use existing CSS variables for consistency
- Requirements coverage: VOTE-01 (UI structure), VOTE-02 (tally display structure), ELIM-02 (result display structure)
</success_criteria>

<output>
After completion, create `.planning/phases/02-voting-elimination/02-02-SUMMARY.md`
</output>
